"use strict";(self.webpackChunkipydatagrid=self.webpackChunkipydatagrid||[]).push([[673],{7270:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlRendererView=t.HtmlRendererModel=t.ImageRendererView=t.ImageRendererModel=t.HyperlinkRendererView=t.HyperlinkRendererModel=t.BarRendererView=t.BarRendererModel=t.TextRendererView=t.TextRendererModel=t.CellRendererView=t.CellRendererModel=void 0;const r=i(8568),a=i(8702),n=i(7088),o=i(3909),s=i(1797),l=i(7715),d=i(8479),h=i(6959),c=i(5976);class u extends o.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:u.model_name,_model_module:u.model_module,_model_module_version:u.model_module_version,_view_name:u.view_name,_view_module:u.view_module,_view_module_version:u.view_module_version})}}t.CellRendererModel=u,u.model_name="CellRendererModel",u.model_module=s.MODULE_NAME,u.model_module_version=s.MODULE_VERSION,u.view_name="CellRendererView",u.view_module=s.MODULE_NAME,u.view_module_version=s.MODULE_VERSION;class m extends o.WidgetView{constructor(){super(...arguments),this.processors={}}async render(){await this.initializeRenderer(),this.updateRenderer(),this.on("renderer-needs-update",this.updateRenderer.bind(this))}async onThemeChanged(){return await this.initializeRenderer(),this.updateRenderer()}async initializeRenderer(){const e={},t=this.model.get_attrs().map((e=>e.name));this.model.on_some_change(t,this._on_some_processors_change,this);for(const i of t)e[i]=this.updateProcessor(i);this.processors=await o.resolvePromisesDict(e)}_on_some_processors_change(e){const t={};for(const i in e.changed)t[i]=this.updateProcessor(i);o.resolvePromisesDict(t).then((e=>{this.processors=Object.assign(Object.assign({},this.processors),e),this.trigger("renderer-needs-update")}))}updateRenderer(){const e={};for(const t of this.model.get_attrs())t.phosphorName&&(e[t.phosphorName]=e=>this.process(t.name,e,t.defaultValue));this.renderer=this.createRenderer(e),this.trigger("renderer-changed")}updateProcessor(e){const t=this.model.get(e);return c.Scalar.isScalar(t)?t:(this.listenTo(t,"change",(()=>{this.trigger("renderer-needs-update")})),this.create_child_view(t))}process(e,t,i){const r=this.processors[e];return c.Scalar.isScalar(r)?"font"===e&&"string"==typeof r&&("number"==typeof t.value&&!Number.isFinite(t.value)||t.value instanceof Date&&Number.isNaN(t.value.getTime()))?`italic ${r}`:r:r instanceof d.VegaExprView?r.process(t,i):"date"==r.model.type||"date_color_linear"==r.model.type?r.scale(new Date(t.value)):r.scale(t.value)}}t.CellRendererView=m;class g extends u{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:g.model_name,_view_name:g.view_name,font:"12px sans-serif",text_color:null,text_wrap:!1,text_elide_direction:"right",text_value:null,background_color:null,vertical_alignment:"center",horizontal_alignment:"left",format:null,format_type:"number",missing:""})}get_attrs(){return[{name:"font",phosphorName:"font",defaultValue:"12px sans-serif"},{name:"text_wrap",phosphorName:"wrapText",defaultValue:!1},{name:"text_elide_direction",phosphorName:"elideDirection",defaultValue:"right"},{name:"text_color",phosphorName:"textColor",defaultValue:c.Theme.getFontColor()},{name:"text_value",phosphorName:null,defaultValue:null},{name:"background_color",phosphorName:"backgroundColor",defaultValue:c.Theme.getBackgroundColor()},{name:"vertical_alignment",phosphorName:"verticalAlignment",defaultValue:"center"},{name:"horizontal_alignment",phosphorName:"horizontalAlignment",defaultValue:"left"},{name:"format",phosphorName:null,defaultValue:null}]}}t.TextRendererModel=g,g.serializers=Object.assign(Object.assign({},u.serializers),{font:{deserialize:o.unpack_models},text_color:{deserialize:o.unpack_models},text_wrap:{deserialize:o.unpack_models},text_elide_direction:{deserialize:o.unpack_models},text_value:{deserialize:o.unpack_models},background_color:{deserialize:o.unpack_models},vertical_alignment:{deserialize:o.unpack_models},horizontal_alignment:{deserialize:o.unpack_models},format:{deserialize:o.unpack_models}}),g.model_name="TextRendererModel",g.view_name="TextRendererView";class p extends m{render(){return super.render().then((()=>{this.model.on_some_change(["missing","format_type"],(()=>{this.trigger("renderer-needs-update")}),this)}))}createRenderer(e){return new n.TextRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}getFormatter(e={}){return e=>{let t;if(null===e.value)t=this.model.get("missing");else{const i=this.process("format",e,null);t=null===i?String(e.value):"time"==this.model.get("format_type")?String(a.timeFormat(i)(new Date(e.value))):String(r.format(i)(e.value))}return this.process("text_value",e,t)||t}}}t.TextRendererView=p;class _ extends g{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:_.model_name,_view_name:_.view_name,bar_color:"#4682b4",bar_value:0,orientation:"horizontal",bar_vertical_alignment:"bottom",bar_horizontal_alignment:"left",show_text:!0})}get_attrs(){return super.get_attrs().concat([{name:"bar_color",phosphorName:"barColor",defaultValue:"#4682b4"},{name:"bar_value",phosphorName:"barValue",defaultValue:0},{name:"orientation",phosphorName:"orientation",defaultValue:"horizontal"},{name:"bar_vertical_alignment",phosphorName:"barVerticalAlignment",defaultValue:"bottom"},{name:"bar_horizontal_alignment",phosphorName:"barHorizontalAlignment",defaultValue:"left"},{name:"show_text",phosphorName:"showText",defaultValue:!0}])}}t.BarRendererModel=_,_.serializers=Object.assign(Object.assign({},g.serializers),{bar_color:{deserialize:o.unpack_models},bar_value:{deserialize:o.unpack_models},orientation:{deserialize:o.unpack_models},bar_vertical_alignment:{deserialize:o.unpack_models},bar_horizontal_alignment:{deserialize:o.unpack_models},show_text:{deserialize:o.unpack_models}}),_.model_name="BarRendererModel",_.view_name="BarRendererView",t.BarRendererView=class extends p{createRenderer(e){return new l.BarRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}};class f extends g{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:_.model_name,_view_name:_.view_name,url:{},url_name:{}})}get_attrs(){return super.get_attrs().concat([{name:"url",phosphorName:"url",defaultValue:null},{name:"url_name",phosphorName:"urlName",defaultValue:null}])}}t.HyperlinkRendererModel=f,f.serializers=Object.assign(Object.assign({},g.serializers),{url:{deserialize:o.unpack_models},url_name:{deserialize:o.unpack_models}}),f.model_name="HyperlinkRendererModel",f.view_name="HyperlinkRendererView",t.HyperlinkRendererView=class extends p{createRenderer(e){return new n.HyperlinkRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}};class y extends u{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:y.model_name,_view_name:y.view_name,background_color:{},placeholder:{},text_color:{},width:{},height:{}})}get_attrs(){return[{name:"background_color",phosphorName:"backgroundColor",defaultValue:""},{name:"placeholder",phosphorName:"placeholder",defaultValue:"..."},{name:"text_color",phosphorName:"textColor",defaultValue:"#000000"},{name:"width",phosphorName:"width",defaultValue:""},{name:"height",phosphorName:"height",defaultValue:"100%"}]}}t.ImageRendererModel=y,y.serializers=Object.assign(Object.assign({},g.serializers),{background_color:{deserialize:o.unpack_models},placeholder:{deserialize:o.unpack_models},text_color:{deserialize:o.unpack_models},width:{deserialize:o.unpack_models},height:{deserialize:o.unpack_models}}),y.model_name="ImageRendererModel",y.view_name="ImageRendererView",t.ImageRendererView=class extends m{createRenderer(e){return n.ImageRenderer?new n.ImageRenderer(Object.assign({},e)):new n.TextRenderer({format:e=>"ImageRenderer not available. Check that you are using JupyterLab>=4.1.",wrapText:!0})}};class b extends u{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:b.model_name,_view_name:b.view_name,font:"12px sans-serif",placeholder:"...",text_color:null,background_color:null,vertical_alignment:"center",horizontal_alignment:"left"})}get_attrs(){return[{name:"font",phosphorName:"font",defaultValue:"12px sans-serif"},{name:"placeholder",phosphorName:"placeholder",defaultValue:"..."},{name:"text_color",phosphorName:"textColor",defaultValue:c.Theme.getFontColor()},{name:"background_color",phosphorName:"backgroundColor",defaultValue:c.Theme.getBackgroundColor()},{name:"vertical_alignment",phosphorName:"verticalAlignment",defaultValue:"center"},{name:"horizontal_alignment",phosphorName:"horizontalAlignment",defaultValue:"left"}]}}t.HtmlRendererModel=b,b.serializers=Object.assign(Object.assign({},u.serializers),{font:{deserialize:o.unpack_models},placeholder:{deserialize:o.unpack_models},text_color:{deserialize:o.unpack_models},background_color:{deserialize:o.unpack_models},vertical_alignment:{deserialize:o.unpack_models},horizontal_alignment:{deserialize:o.unpack_models}}),b.model_name="HtmlRendererModel",b.view_name="HtmlRendererView",t.HtmlRendererView=class extends m{createRenderer(e){let t;return n.AsyncCellRenderer?(t=new h.exportedClass(Object.assign({},e)),t.imageLoaded.connect((()=>{setTimeout((()=>{this.trigger("renderer-needs-update")}),0)}))):t=new n.TextRenderer({format:e=>"AsyncCellRenderer not available. Check that you are using JupyterLab>=4.1.",wrapText:!0}),t}}},7715:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BarRenderer=void 0;const r=i(7088);class a extends r.TextRenderer{constructor(e={}){super(e),this.barColor=e.barColor||"#4682b4",this.barValue=e.barValue||0,this.orientation=e.orientation||"horizontal",this.barVerticalAlignment=e.barVerticalAlignment||"bottom",this.barHorizontalAlignment=e.barHorizontalAlignment||"left",this.showText=e.showText||!0}paint(e,t){const i=r.CellRenderer.resolveOption(this.showText,t);this.drawBackground(e,t),this.drawBar(e,t),i&&this.drawText(e,t)}prepare(e,t){const{font:i,textColor:r,barColor:a,backgroundColor:n,horizontalAlignment:o}=this;i&&"string"==typeof i&&(e.font=i),n&&"string"==typeof n?e.fillStyle=n:a&&"string"==typeof a?e.fillStyle=a:r&&"string"==typeof r&&(e.fillStyle=r),e.textAlign="string"==typeof o?o:"left",e.textBaseline="bottom"}drawBar(e,t){const i=r.CellRenderer.resolveOption(this.barColor,t);let a=r.CellRenderer.resolveOption(this.barValue,t);const n=r.CellRenderer.resolveOption(this.barVerticalAlignment,t),o=r.CellRenderer.resolveOption(this.barHorizontalAlignment,t),s=r.CellRenderer.resolveOption(this.orientation,t);if(!i)return;a>1&&(a=1),a<0&&(a=0);let l=t.x,d=t.y;if(e.fillStyle=i,"horizontal"===s){const i=a*t.width;"center"===o&&(l+=(t.width-i)/2),"right"===o&&(l+=t.width-i),e.fillRect(l,d,i,t.height)}else{const i=a*t.height;"center"===n?d+=(t.height-i)/2:"bottom"===n&&(d+=t.height-i),e.fillRect(l,d,t.width,i)}}}t.BarRenderer=a},1242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize_data=t.deserialize_data_simple=t.unpack_raw_data=void 0;const r=i(6738),a=i(1608);function n(e){if(Array.isArray(e)){const t=[];return e.forEach(((e,i)=>{t.push(n(e))})),t}if(e instanceof Object&&"string"!=typeof e){const t={};return Object.keys(e).forEach((i=>{t[i]=n(e[i])})),t}return"$NaN$"===e?Number.NaN:"$Infinity$"===e?Number.POSITIVE_INFINITY:"$NegInfinity$"===e?Number.NEGATIVE_INFINITY:"$NaT$"===e?new Date("INVALID"):e}function o(e,t){const i={};if(Array.isArray(e.data)){if(0===e.data.length)return i;const t=n(e.data);for(const e of Object.keys(t[0])){const r=new Array(t.length);let a=0;for(const i of t)r[a++]=i[e];i[e]=r}return i}for(const a of Object.keys(e.data))if(i[a]=[],Array.isArray(e.data[a]))i[a]=e.data[a];else if("raw"==e.data[a].type)i[a]=n(e.data[a].value);else if(0!==e.data[a].value.length){let n=r.array_or_json_serializer.deserialize(e.data[a],t);if("date"===n.type){const e=n;n=[];for(let t=0;t<e.length;t++)n[t]=new Date(e[t]).toISOString()}i[a]=n}return i}t.unpack_raw_data=n,t.deserialize_data_simple=o,t.deserialize_data=function(e,t){const i=o(e,t);return new a.DataSource(i,e.fields,e.schema,!0)}},3256:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueValueStateManager=t.InteractiveFilterDialog=void 0;const r=i(4766),a=i(7088),n=i(4602),o=i(6230),s=i(7088),l=i(5256),d=i(4873),h=i(1339),c=i(5976),u=i(1608);class m extends l.BoxPanel{constructor(e){super(),this._columnDType="number",this._region="column-header",this._mode="value",this._filterOperator="<",this.hasFilter=!1,this.userInteractedWithDialog=!1,this.addClass("ipydatagrid-filterMenu"),this.node.style.position="absolute",this._model=e.model,this._filterByConditionWidget=new l.Widget,this._filterByConditionWidget.addClass("ipydatagrid-filter-condition-select"),this._uniqueValueGrid=new a.DataGrid({headerVisibility:"none",stretchLastColumn:!0}),this._uniqueValueGrid.addClass("ipydatagrid-unique-value-grid"),this._uniqueValueStateManager=new _({grid:this._uniqueValueGrid});const t=new f({stateManager:this._uniqueValueStateManager,dialog:this});this._uniqueValueGrid.mouseHandler=t,this._titleWidget=new l.Widget,this._titleWidget.addClass("ipydatagrid-filter-title"),this._applyWidget=new l.Widget,this._applyWidget.addClass("ipydatagrid-filter-apply"),this._textInputWidget=new g,this._selectAllCheckbox=new p,this._connectToCheckbox(),this.addWidget(this._titleWidget),this.addWidget(this._textInputWidget),this.addWidget(this._selectAllCheckbox),this.addWidget(this._filterByConditionWidget),this.addWidget(this._uniqueValueGrid),this.addWidget(this._applyWidget)}get column(){return this._column}_connectToCheckbox(){this._selectAllCheckbox.checkChanged.connect(((e,t)=>{this.userInteractedWithDialog=!0,this.addRemoveAllUniqueValuesToState(t)}))}hasValidFilterValue(){return""!==this._filterValue&&void 0!==this._filterValue&&(!Array.isArray(this._filterValue)||""!==this._filterValue[0]&&void 0!==this._filterValue[0]&&""!==this._filterValue[1]&&void 0!==this._filterValue[1])}applyFilter(){if(!this.hasValidFilterValue)return;if(!this.hasFilter&&!this.userInteractedWithDialog&&"value"===this._mode)return void this.close();const e="condition"===this._mode?this._filterValue:this._uniqueValueStateManager.getValues(this.region,this._column),t={type:"filter",column:this._column,operator:this._filterOperator,value:e};this._model.addTransform(t),this.close()}updateDialog(){const e=this._model.transformMetadata(this._column);e&&e.filter?(this._filterOperator=e.filter.operator,this._filterValue=e.filter.value):(this._filterOperator="<",this._filterValue=void 0),"value"===this._mode&&(this._filterOperator="in"),this._render()}_render(){if("condition"===this._mode)this._applyWidget.node.style.minHeight="65px",this._selectAllCheckbox.setHidden(!0),this._uniqueValueGrid.setHidden(!0),this._textInputWidget.setHidden(!0),this._filterByConditionWidget.setHidden(!1),d.VirtualDOM.render([this.createOperatorList()],this._filterByConditionWidget.node),d.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),d.VirtualDOM.render(["between"===this._filterOperator?this.createDualValueNode():this.createSingleValueNode()],this._applyWidget.node);else{if("value"!==this._mode)throw"unreachable";this._applyWidget.node.style.minHeight="30px",this._selectAllCheckbox.setHidden(!1),this._uniqueValueGrid.setHidden(!1),this._textInputWidget.setHidden(!1),this._filterByConditionWidget.setHidden(!0),d.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),d.VirtualDOM.render([this.createTextInputDialog()],this._textInputWidget.node),d.VirtualDOM.render([this.createApplyButtonNode()],this._applyWidget.node),this._renderUniqueVals()}}_renderUniqueVals(){this._model.uniqueValues(this._region,this._column).then((e=>{const t=new u.DataSource({index:[...e.keys()],uniqueVals:e},[{index:null},{uniqueVals:null}],{fields:[{name:"index",type:"integer",rows:[]},{name:"uniqueVals",type:"number",rows:[]}],primaryKey:["index"],primaryKeyUuid:"index"});this._uniqueValueGrid.dataModel=new r.ViewBasedJSONModel({datasource:t});const i={type:"sort",column:"uniqueVals",columnIndex:this.model.getSchemaIndex(this._region,0),desc:!1};this._uniqueValueGrid.dataModel.addTransform(i)}))}async updateSelectAllCheckboxState(){if(!this.userInteractedWithDialog&&!this.hasFilter)return void(this._selectAllCheckbox.checked=!0);const e=await this._model.uniqueValues(this._region,this._column);let t=!0;for(const i of e)if(!this._uniqueValueStateManager.has(this._region,this._column,i)){t=!1;break}this._selectAllCheckbox.checked=t}open(e){this._column=e.column,this._columnDType=this._model.metadata(e.region,0,this._model.columnNameToIndex(this._column)).type,this._region=e.region,this._mode=e.mode,this.hasFilter=void 0!==this._model.getFilterTransform(this._column),this.userInteractedWithDialog=!1,this.updateSelectAllCheckboxState(),this._uniqueValueGrid.style={voidColor:c.Theme.getBackgroundColor(),backgroundColor:c.Theme.getBackgroundColor(),gridLineColor:c.Theme.getBackgroundColor(),headerGridLineColor:c.Theme.getBorderColor(1),selectionFillColor:c.Theme.getBrandColor(2,.4),selectionBorderColor:c.Theme.getBrandColor(1),headerSelectionFillColor:c.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:c.Theme.getBorderColor(1),cursorFillColor:c.Theme.getBrandColor(3,.4),cursorBorderColor:c.Theme.getBrandColor(1)},this._uniqueValueGrid.cellRenderers.update({body:new h.FilterValueRenderer({stateManager:this._uniqueValueStateManager,dialog:this,textColor:c.Theme.getFontColor(),backgroundColor:c.Theme.getBackgroundColor()})}),this.updateDialog();const t=window.pageXOffset,i=window.pageYOffset,r=document.documentElement.clientWidth,a=document.documentElement.clientHeight,n=a-(e.forceY?e.y:0),o=this.node,s=o.style;s.top="",s.left="",s.width="",s.height="",s.visibility="hidden",s.maxHeight=`${n}px`,l.Widget.attach(this,document.body);const{width:d,height:u}=o.getBoundingClientRect();!e.forceX&&e.x+d>t+r&&(e.x=t+r-d),!e.forceY&&e.y+u>i+a&&(e.y>i+a?e.y=i+a-u:e.y=e.y-u),s.top=`${Math.max(0,e.y)}px`,s.left=`${Math.max(0,e.x)}px`,s.visibility=""}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"keydown":this._evtKeyDown(e)}}_evtMouseDown(e){this.node.contains(e.target)||this.close()}_evtKeyDown(e){switch(e.stopPropagation(),e.keyCode){case 13:return void this.applyFilter();case 27:return void this.close()}}onBeforeAttach(e){document.addEventListener("mousedown",this,!0),document.addEventListener("keydown",this,!0)}onAfterDetach(e){document.removeEventListener("mousedown",this,!0),document.removeEventListener("keydown",this,!0)}createTextInputDialog(){return d.h.div({className:"ipydatagrid-text-input-filter"},d.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),oninput:e=>{const t=e.srcElement,i=this._uniqueValueGrid.dataModel;if(""===t.value)return i.clearTransforms(),this._textInputFilterValue=void 0,void this._selectAllCheckbox.setHidden(!1);this._textInputFilterValue=t.value;const r=this._textInputFilterValue,a={type:"filter",column:this._column,columnIndex:1,operator:"stringContains",value:r};this._selectAllCheckbox.setHidden(!0),i.clearTransforms(),i.addTransform(a)}}))}createTitleNode(){return d.h.div({className:"",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},"condition"===this._mode?"Filter by condition:":"Filter by value:")}createSingleValueNode(){return d.h.div({className:"widget-text",style:{paddingLeft:"5px",minHeight:"60px"}},d.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)",visibility:"empty"===this._filterOperator||"notempty"===this._filterOperator||"value"===this._mode?"hidden":"visible"},key:String(Math.random()),oninput:e=>{const t=e.srcElement;this._filterValue="number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value},value:void 0===this._filterValue||Array.isArray(this._filterValue)?"":String(this._filterValue)}),d.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},d.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createDualValueNode(){const e=this._filterValue;return d.h.div({className:"widget-text",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},d.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=["number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value,this._filterValue[1]]},value:void 0!==e[0]?String(e[0]):""}),"and ",d.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=[this._filterValue[0],"number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value]},value:void 0!==e[1]?String(e[1]):""}),d.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},d.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createLoadingMessageNodes(){return d.h.div({className:"p-Menu-itemLabel widget-text",style:{paddingLeft:"5px"}},"Loading unique values...")}async createUniqueValueNodes(){const e=(await this._model.uniqueValues(this._region,this._column)).map((e=>d.h.option({value:e},String(e))));return d.h.li({className:"p-Menu-item"},d.h.div({className:"widget-select widget-select-multiple",style:{width:"200px"}},d.h.select({multiple:"",value:"",style:{width:"200px",height:"200px",margin:"5px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},onchange:e=>{const t=e.srcElement,i=[];for(let e=0;e<t.options.length;e++)t.options[e].selected&&i.push("number"===this._columnDType||"integer"===this._columnDType?Number(t.options[e].value):t.options[e].value);this._filterValue=i}},e)))}createOperatorList(){let e;return e="number"===this._columnDType||"integer"===this._columnDType?this._createNumericalOperators():["date","time","datetime"].includes(this._columnDType)?this._createDateOperators():"boolean"===this._columnDType?this._createBooleanOperators():this._createCategoricalOperators(),d.h.div({className:"widget-dropdown",style:{paddingLeft:"5px"}},d.h.select({style:{width:"200px",fontSize:"12px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),onchange:e=>{const t=e.srcElement;this._filterOperator=t.value,"between"===t.value&&(this._filterValue=new Array(2)),this._render()},value:this._filterOperator},...e))}createApplyButtonNode(){return d.h.div({className:"",style:{paddingLeft:"5px",textAlign:"right",minHeight:"30px"}},d.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply"))}_createNumericalOperators(){const e=this._filterOperator;return[d.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),d.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),d.h.option({value:"",disabled:"disabled"},"───────────"),d.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Less than:"),d.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Greater than:"),d.h.option(Object.assign({value:"<="},"<="===e&&{selected:""}),"Less than or equal to:"),d.h.option(Object.assign({value:">="},">="===e&&{selected:""}),"Greater than or equal to:"),d.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"In between:"),d.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is equal to:"),d.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not equal to:")]}_createDateOperators(){const e=this._filterOperator;return[d.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),d.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),d.h.option({value:"",disabled:"disabled"},"───────────"),d.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Date is before:"),d.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Date is after:"),d.h.option(Object.assign({value:"<="},"<="===e&&{selected:""}),"Date is on or before:"),d.h.option(Object.assign({value:">="},">="===e&&{selected:""}),"Date is on or after:"),d.h.option(Object.assign({value:"isOnSameDay"},"isOnSameDay"===e&&{selected:""}),"Date is exactly:"),d.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Date is in between:"),d.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Timestamp is exactly equal to:"),d.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Timestamp is not exactly equal to:")]}_createBooleanOperators(){const e=this._filterOperator;return[d.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),d.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:")]}_createCategoricalOperators(){const e=this._filterOperator;return[d.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty"),d.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty"),d.h.option({value:"",disabled:"disabled"},"───────────"),d.h.option(Object.assign({value:"contains"},"contains"===e&&{selected:""}),"Contains"),d.h.option(Object.assign({value:"!contains"},"!contains"===e&&{selected:""}),"Does not contain"),d.h.option(Object.assign({value:"startswith"},"startswith"===e&&{selected:""}),"Starts with"),d.h.option(Object.assign({value:"endswith"},"endswith"===e&&{selected:""}),"Ends with"),d.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is exactly"),d.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not exactly"),d.h.option({value:"",disabled:"disabled"},"───────────"),d.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Is before"),d.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Is after"),d.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Is in between")]}async addRemoveAllUniqueValuesToState(e){const t=await this.model.uniqueValues(this._region,this._column);for(const i of t)e?this._uniqueValueStateManager.add(this._region,this._column,i):this._uniqueValueStateManager.remove(this._region,this._column,i)}get model(){return this._model}set model(e){this._model=e}get value(){return this._filterValue}get operator(){return this._filterOperator}get region(){return this._region}get columnDType(){return this._columnDType}}t.InteractiveFilterDialog=m;class g extends l.Widget{constructor(){super(),this.node.style.minHeight="16px",this.node.style.overflow="visible"}}class p extends l.Widget{constructor(){super(),this.toggleCheckMark=()=>{this._checked=!this._checked,this.renderCheckbox(),this._checkedChanged.emit(this._checked)},this._checked=!1,this._checkedChanged=new n.Signal(this),this.canvas=document.createElement("canvas"),this.node.style.minHeight="16px",this.node.style.overflow="visible",this.node.appendChild(this.canvas)}get checked(){return this._checked}set checked(e){this._checked=e,this.renderCheckbox()}get checkChanged(){return this._checkedChanged}addCheckMark(){const e=this.canvas.getContext("2d");e.lineWidth=1,e.beginPath(),e.strokeStyle="#000000",e.moveTo(11,13),e.lineTo(12,16),e.lineTo(16,10),e.lineWidth=2,e.stroke()}renderCheckbox(){const e=this.canvas.getContext("2d"),t=100;this.canvas.style.width=t+"px",this.canvas.style.height=t+"px";const i=window.devicePixelRatio;this.canvas.width=Math.floor(t*i),this.canvas.height=Math.floor(t*i),e.scale(i,i),e.lineWidth=1,e.fillStyle="#ffffff",e.fillRect(8,8,10,10),e.strokeStyle="black",e.strokeRect(8,8,10,10),e.font="12px sans-serif",e.fillStyle=c.Theme.getFontColor(0),e.fillText("(Select All)",30,17),this._checked&&this.addCheckMark()}onAfterAttach(){this.renderCheckbox(),this.canvas.addEventListener("click",this.toggleCheckMark,!0)}onAfterDetach(e){this.canvas.removeEventListener("click",this.toggleCheckMark,!0)}}class _{constructor(e){this._state={},this._grid=e.grid}has(e,t,i){const r=this.getKeyName(e,t);return this._state.hasOwnProperty(r)&&this._state[r].has(i)}getKeyName(e,t){return`${e}:${t}`}add(e,t,i){const r=this.getKeyName(e,t);this._state.hasOwnProperty(r)||(this._state[r]=new Set),this._state[r].add(i);const a=new y("all",0,0,0,0);o.MessageLoop.postMessage(this._grid.viewport,a)}remove(e,t,i){const r=this.getKeyName(e,t);this._state.hasOwnProperty(r)&&this._state[r].delete(i);const a=new y("all",0,0,0,0);o.MessageLoop.postMessage(this._grid.viewport,a)}getValues(e,t){const i=this.getKeyName(e,t);return this._state.hasOwnProperty(i)?Array.from(this._state[i]):[]}}t.UniqueValueStateManager=_;class f extends s.BasicMouseHandler{constructor(e){super(),this._uniqueValuesSelectionState=e.stateManager,this._filterDialog=e.dialog}onMouseDown(e,t){const i=e.hitTest(t.clientX,t.clientY);if("void"===i.region)return;const r=i.row,a=this._filterDialog.column,n=this._filterDialog.region,o=e.dataModel.data("body",r,0),s=()=>{this._uniqueValuesSelectionState.has(n,a,o)?this._uniqueValuesSelectionState.remove(n,a,o):this._uniqueValuesSelectionState.add(n,a,o),this._filterDialog.updateSelectAllCheckboxState()};this._filterDialog.hasFilter||this._filterDialog.userInteractedWithDialog?s():this._filterDialog.addRemoveAllUniqueValuesToState(!0).then((()=>{this._filterDialog.userInteractedWithDialog=!0,s()}))}}class y extends o.ConflatableMessage{constructor(e,t,i,r,a){super("paint-request"),this._region=e,this._r1=t,this._c1=i,this._r2=r,this._c2=a}get region(){return this._region}get r1(){return this._r1}get c1(){return this._c1}get r2(){return this._r2}get c2(){return this._c2}conflate(e){return"all"===this._region||("all"===e._region?(this._region="all",!0):this._region===e._region&&(this._r1=Math.min(this._r1,e._r1),this._c1=Math.min(this._c1,e._c1),this._r2=Math.max(this._r2,e._r2),this._c2=Math.max(this._c2,e._c2),!0))}}},1229:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGridContextMenu=t.GridContextMenu=void 0;const r=i(5256);class a{constructor(e){this._menu=new r.Menu({commands:e.commands}),this._menu.addClass("ipydatagrid-context-menu")}}t.GridContextMenu=a;class n extends a{open(e,t){this._menu.clearItems();const i={region:t.region,rowIndex:t.row,columnIndex:t.column,clientX:t.x,clientY:t.y};switch(t.region){case"column-header":this._menu.addItem({command:n.CommandID.SortAscending,args:i}),this._menu.addItem({command:n.CommandID.SortDescending,args:i}),this._menu.addItem({command:n.CommandID.SortClear,args:i}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:n.CommandID.OpenFilterByConditionDialog,args:i}),this._menu.addItem({command:n.CommandID.OpenFilterByValueDialog,args:i}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:n.CommandID.ClearSelection,args:i}),this._menu.addItem({command:n.CommandID.ClearThisFilter,args:i}),this._menu.addItem({command:n.CommandID.ClearFiltersInAllColumns,args:i}),this._menu.addItem({command:n.CommandID.CopyToClipboard,args:i});break;case"corner-header":this._menu.addItem({command:n.CommandID.SortAscending,args:i}),this._menu.addItem({command:n.CommandID.SortDescending,args:i}),this._menu.addItem({command:n.CommandID.SortClear,args:i}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:n.CommandID.OpenFilterByConditionDialog,args:i}),this._menu.addItem({command:n.CommandID.OpenFilterByValueDialog,args:i}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:n.CommandID.CopySelectionToClipboard,args:i}),this._menu.addItem({command:n.CommandID.SaveSelectionAsCsv,args:i}),this._menu.addItem({command:n.CommandID.SaveAllAsCsv,args:i}),this._menu.addItem({type:"separator"}),this._menu.addItem({command:n.CommandID.ClearSelection,args:i}),this._menu.addItem({command:n.CommandID.ClearThisFilter,args:i}),this._menu.addItem({command:n.CommandID.ClearFiltersInAllColumns,args:i});break;case"body":this._menu.addItem({command:n.CommandID.RevertGrid,args:i});break;default:throw"unreachable"}this._menu.open(t.x,t.y);const a=document.body.firstElementChild;this._menu.node.parentElement==document.body&&a!=this._menu.node&&(r.Widget.detach(this._menu),r.Widget.attach(this._menu,document.body,a))}}t.FeatherGridContextMenu=n,function(e){let t;!function(e){e.SortAscending="sort:Asc",e.SortDescending="sort:Desc",e.SortClear="sort:Clear",e.OpenFilterByConditionDialog="filterCondition:openDialog",e.OpenFilterByValueDialog="filterValue:openDialog",e.RevertGrid="grid:reset",e.ClearThisFilter="filter:clearCurrentColumn",e.ClearFiltersInAllColumns="filter:clearAllColumns",e.CopyToClipboard="copyToClipboard",e.CopySelectionToClipboard="copySelectionToClipboard",e.SaveSelectionAsCsv="saveSelectionAsCsv",e.SaveAllAsCsv="saveAllAsCsv",e.ClearSelection="clearSelection"}(t=e.CommandID||(e.CommandID={}))}(n=t.FeatherGridContextMenu||(t.FeatherGridContextMenu={}))},7323:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRenderer=void 0;const r=i(7088),a=i(5976);class n extends r.TextRenderer{constructor(e){super(e.textOptions),this._isLightTheme=e.isLightTheme,this._grid=e.grid}get model(){return this._grid.dataModel}drawText(e,t){const i=r.CellRenderer.resolveOption(this.font,t);if(!i)return;const o=r.CellRenderer.resolveOption(this.textColor,t);if(!o)return;let s=(0,this.format)(t);if(!s)return;const l=r.CellRenderer.resolveOption(this.verticalAlignment,t),d=r.CellRenderer.resolveOption(this.horizontalAlignment,t),h=r.CellRenderer.resolveOption(this.elideDirection,t),c=r.CellRenderer.resolveOption(this.wrapText,t),u=t.height-("center"===l?1:2);if(u<=0)return;const m=r.TextRenderer.measureFontHeight(i);let g,p,_;switch(l){case"top":p=t.y+2+m;break;case"center":p=t.y+t.height/2+m/2;break;case"bottom":p=t.y+t.height-2;break;default:throw"unreachable"}switch(d){case"left":g=t.x+8,_=t.width-14;break;case"center":g=t.x+t.width/2,_=t.width;break;case"right":g=t.x+t.width-8,_=t.width-14;break;default:throw"unreachable"}m>u&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=i,e.fillStyle=o,e.textAlign=d,e.textBaseline="bottom";let f=e.measureText(s).width;if(c&&f>_){e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip();const i=s.split(/\s(?=\b)/);let r=p,a=i.shift();if(0===i.length){let t=e.measureText(a).width;for(;t>_&&""!==a;)for(let i=a.length;i>0;i--){const n=a.substring(0,i);if(e.measureText(n).width<_||1===n.length){const o=a.substring(i,a.length);a=o,t=e.measureText(a).width,e.fillText(n,g,r),r+=m;break}}}else for(;0!==i.length;){const t=i.shift(),n=[a,t].join(" ");e.measureText(n).width>_?(e.fillText(a,g,r),r+=m,a=t):a=n}return void e.fillText(a,g,r)}const y="…";if("right"===h)for(;f>_&&s.length>1;)s=s.length>4&&f>=2*_?s.substring(0,s.length/2+1)+y:s.substring(0,s.length-2)+y,f=e.measureText(s).width;else for(;f>_&&s.length>1;)s=s.length>4&&f>=2*_?y+s.substring(s.length/2):y+s.substring(2),f=e.measureText(s).width;if(e.fillText(s,g,p),"column-header"===t.region&&t.row!==this._grid.dataModel.rowCount("column-header")-1)return;const b=n.iconWidth+n.iconWidth+n.iconSpacing+2*n.buttonPadding;e.fillStyle=r.CellRenderer.resolveOption(this.backgroundColor,t),e.fillRect(t.x+t.width-b,t.y+t.height-b,b,b);const w=t.x+t.width-n.iconWidth-n.buttonPadding;if(this.drawFilterIcon(e,t),e.fillStyle=a.Theme.getBorderColor(1),e.fill(),this.model){const i=this.model.getSchemaIndex(t.region,t.column),r=this.model.currentView.dataset.columns[i],n=this.model.transformMetadata(r);n&&n.filter&&(e.fillStyle=a.Theme.getBrandColor(this._isLightTheme?8:6),e.fill()),n&&n.sort&&(n.sort.desc?this.drawSortArrow(e,t,w,!1):this.drawSortArrow(e,t,w,!0),e.fillStyle=a.Theme.getBrandColor(this._isLightTheme?7:5),e.fill())}}drawFilterIcon(e,t){const i=t.x+t.width-n.iconWidth-n.buttonPadding,r=n.iconWidth/2+1,a=n.iconWidth/2-1,o=t.height-n.iconHeight-1+t.y;e.beginPath(),e.moveTo(i,o),e.lineTo(i+n.iconWidth,o),e.lineTo(i+r,t.y+t.height-n.iconHeight+2),e.lineTo(i+r,t.y+t.height-1.5*n.buttonPadding),e.lineTo(i+a,t.y+t.height-2*n.buttonPadding),e.lineTo(i+a,t.y+t.height-n.iconHeight+2),e.closePath()}drawSortArrow(e,t,i,r){const a=n.iconWidth-2,o=i-n.iconSpacing,s=o-a/2+.5,l=o-a/2-.5,d=t.height+t.y-n.buttonPadding-n.iconHeight+4,h=o-a/2,c=t.height+t.y-n.iconHeight-1,u=t.height-8+t.y+n.buttonPadding;e.beginPath(),r?(e.moveTo(h,c),e.lineTo(o,d),e.lineTo(o,d+1),e.lineTo(s,d+1),e.lineTo(h+.5,u),e.lineTo(h-.5,u),e.lineTo(h-.5,d+1),e.lineTo(o-a,d+1),e.lineTo(o-a,d)):(e.moveTo(h,u),e.lineTo(o-a,d+4.5),e.lineTo(o-a,d+3.5),e.lineTo(l,d+3.5),e.lineTo(l,c),e.lineTo(h+.5,c),e.lineTo(h+.5,d+3.5),e.lineTo(o,d+3.5),e.lineTo(o,d+4.5)),e.closePath()}}t.HeaderRenderer=n,n.buttonSize=11,n.iconHeight=12,n.iconWidth=7,n.buttonPadding=3,n.iconSpacing=1.5},6959:(e,t,i)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.exportedClass=void 0;const a=i(7262),n=i(7088),o=i(4602),s=i(5976);let l;t.exportedClass=l,n.AsyncCellRenderer&&(t.exportedClass=((r=class e extends n.AsyncCellRenderer{constructor(e={}){super(),this._imgLoaded=new o.Signal(this),this.font=e.font||"12px",this.placeholder=e.placeholder||"...",this.textColor=e.textColor||s.Theme.getFontColor(),this.backgroundColor=e.backgroundColor||s.Theme.getBackgroundColor(),this.verticalAlignment=e.verticalAlignment||"bottom",this.horizontalAlignment=e.horizontalAlignment||"left"}isReady(t){return!t.value||void 0!==e.dataCache.get(t.value)}get imageLoaded(){return this._imgLoaded}async load(t){if(!t.value)return;const i=t.value,r=new a.PromiseDelegate;e.dataCache.set(i,void 0);const n=new Image;return n.src=this.htmlToSvg(t),n.width=t.width,n.height=t.height,n.onload=()=>{e.dataCache.set(i,n),r.resolve(),this._imgLoaded.emit()},r.promise}paintPlaceholder(e,t){this.drawBackground(e,t),this.drawPlaceholder(e,t)}paint(e,t){this.drawBackground(e,t),this.drawImage(e,t)}drawBackground(e,t){const i=n.CellRenderer.resolveOption(this.backgroundColor,t);i&&(e.fillStyle=i,e.fillRect(t.x,t.y,t.width,t.height))}drawPlaceholder(e,t){const i=n.CellRenderer.resolveOption(this.placeholder,t),r=n.CellRenderer.resolveOption(this.textColor,t),a=t.x+t.width/2,o=t.y+t.height/2;e.fillStyle=r,e.fillText(i,a,o)}drawImage(t,i){if(!i.value)return;const r=e.dataCache.get(i.value);if(!r)return this.drawPlaceholder(t,i);const a=n.CellRenderer.resolveOption(this.font,i),o=n.CellRenderer.resolveOption(this.textColor,i),s=n.TextRenderer.measureFontHeight(a),l=n.CellRenderer.resolveOption(this.verticalAlignment,i),d=n.CellRenderer.resolveOption(this.horizontalAlignment,i),h=i.height-("center"===l?1:2);h<=0||(t.textBaseline="bottom",t.textAlign=d,t.font=a,t.fillStyle=o,s>h&&(t.beginPath(),t.rect(i.x,i.y,i.width,i.height-1),t.clip()),t.drawImage(r,i.x,i.y))}htmlToSvg(e){const t=n.CellRenderer.resolveOption(this.font,e),i=n.CellRenderer.resolveOption(this.textColor,e),r=n.CellRenderer.resolveOption(this.verticalAlignment,e),a=n.CellRenderer.resolveOption(this.horizontalAlignment,e),o=n.CellRenderer.resolveOption(e.width,e),s=n.CellRenderer.resolveOption(e.height,e),l=n.CellRenderer.resolveOption(e.value,e);return"data:image/svg+xml,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${o}px" height="${s}px">\n      <foreignObject width="${o}px" height="${s}px">\n        <div\n          xmlns="http://www.w3.org/1999/xhtml"\n          style="display: table-cell; font: ${t}; width: ${o}px; height: ${s}px; color: ${i}; vertical-align: ${"center"===r?"middle":r}; text-align: ${a}"\n        >\n          <div style="display: inline-block; padding: 0 2px">${l}</div>\n        </div>\n      </foreignObject>\n    </svg>`)}}).dataCache=new Map,l=r))},3244:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingView=void 0;const r=i(3816);class a extends r.View{constructor(e){super(e.datasource),this._streamed_data={},this._rowCount=e.rowCount}rowCount(e){return"body"===e?this._rowCount:this._bodyFields[0].rows.length}data(e,t,i){if("body"==e){const e=this._bodyFields[i];if(void 0!==this._streamed_data[e.name]){const i=this._streamed_data[e.name][t];return void 0!==i?i:"..."}return"..."}if("row-header"==e){const e=this._headerFields[i];if(void 0!==this._streamed_data[e.name]){const i=this._streamed_data[e.name][t];return void 0!==i?i:"..."}return"..."}return super.data(e,t,i)}setDataRange(e,t,i,r,a){let n;this._data.setColumns(a.columns);for(let o=i;o<=r;o++){n=this._bodyFields[o],void 0===this._streamed_data[n.name]&&(this._streamed_data[n.name]=[]);let i=0;for(let r=e;r<=t;r++)this._streamed_data[n.name][r]=a.data[n.name][i],i++}for(let i=0;i<this._headerFields.length;i++){n=this._headerFields[i],void 0===this._streamed_data[n.name]&&(this._streamed_data[n.name]=[]);let r=0;for(let i=e;i<=t;i++)this._streamed_data[n.name][i]=a.data[n.name][r],r++}}setData(e,t,i){const r=this._bodyFields[i];void 0===this._streamed_data[r.name]&&(this._streamed_data[r.name]=[]),this._streamed_data[r.name][t]=e}setRowCount(e){this._rowCount=e}}t.StreamingView=a},6682:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingViewBasedJSONModel=void 0;const r=i(1242),a=i(3244),n=i(4766);class o extends n.ViewBasedJSONModel{constructor(e){super(e)}setModelRangeData(e,t,i,r,a){this._currentView.setDataRange(e,t,i,r,a),this.emitChanged({type:"cells-changed",region:"body",row:e,column:i,rowSpan:t-e+1,columnSpan:r-i+1}),this.emitChanged({type:"cells-changed",region:"row-header",row:e,column:0,rowSpan:t-e+1,columnSpan:this._currentView.columnCount("row-header")})}uniqueValues(e,t){if(this._unique&&e==this._unique.region&&t==this._unique.column)return Promise.resolve(this._unique.values);const i=new Promise((t=>{this._dataModel.once("msg:custom",((i,a)=>{if("unique-values-reply"===i.event_type){const{value:n}=i;for(const e of Object.keys(n.data))"raw"!==n.data[e].type&&(n.data[e].value=a[n.data[e].value]);const o=r.deserialize_data_simple(n,null)[i.column];this._unique={region:e,column:i.column,values:o},t(this._unique.values)}}))})),a={type:"unique-values-request",column:t};return this._dataModel.send(a),i}updateDataset(e){this._dataModel=e.dataModel,this._dataset=e.datasource,this._updatePrimaryKeyMap();const t=new a.StreamingView({datasource:this._dataset,rowCount:e.rowCount});this.currentView=t}updateCellValue(e){"body"==e.region&&this._currentView.setData(e.value,e.row,e.column)}get currentView(){return this._currentView}set currentView(e){super.currentView=e}_transformStateChangedHandler(e,t){this._transformSignal.emit(t)}}t.StreamingViewBasedJSONModel=o},7575:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SortExecutor=t.FilterExecutor=t.TransformExecutor=void 0;const o=i(1608),s=n(i(229));class l{}t.TransformExecutor=l,t.FilterExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;const i=this._options.field;switch(this._options.operator){case">":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isAfter(a,"day")}return e.data[i][t]>this._options.value};break;case"<":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isBefore(a,"day")}return e.data[i][t]<this._options.value};break;case"<=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isSameOrBefore(a,"day")}return e.data[i][t]<=this._options.value};break;case">=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isSameOrAfter(a,"day")}return e.data[i][t]>=this._options.value};break;case"=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isSame(a)}return e.data[i][t]==this._options.value};break;case"!=":t=t=>{if(["date","datetime","time"].includes(this._options.dType)){const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return!r.isSame(a)}return e.data[i][t]!==this._options.value};break;case"empty":t=t=>null===e.data[i][t];break;case"notempty":t=t=>null!==e.data[i][t];break;case"in":t=t=>this._options.value.includes(e.data[i][t]);break;case"between":t=t=>{const r=this._options.value;if(["date","datetime","time"].includes(this._options.dType)){const a=s.default.utc(e.data[i][t]),n=s.default.utc(r[0]),o=s.default.utc(r[1]);return a.isBetween(n,o,"day")}return e.data[i][t]>r[0]&&e.data[i][t]<r[1]};break;case"startswith":t=t=>e.data[i][t].startsWith(this._options.value);break;case"endswith":t=t=>e.data[i][t].endsWith(this._options.value);break;case"stringContains":t=t=>String(e.data[i][t]).toLowerCase().includes(String(this._options.value).toLowerCase());break;case"contains":t=t=>e.data[i][t].includes(this._options.value);break;case"!contains":t=t=>!e.data[i][t].includes(this._options.value);break;case"isOnSameDay":t=t=>{const r=s.default.utc(e.data[i][t]),a=s.default.utc(this._options.value);return r.isSame(a,"day")};break;default:throw"unreachable"}const r={},a=Array.from(Array(e.length).keys()).filter(t);for(const t of Object.keys(e.data)){let i=0;r[t]=[];for(const n of a)r[t][i++]=e.data[t][n]}return new o.DataSource(r,e.fields,e.schema)}},t.SortExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;const i=this._options.field,r=this._options.dType,a=e=>"string"!=typeof e?String(e):e,n=e=>null===e||"number"==typeof e&&Number.isNaN(e)||e instanceof Date&&Number.isNaN(e.getTime()),s=Array.from(Array(e.length).keys()).filter((t=>n(e.data[i][t]))),l=Array.from(Array(e.length).keys()).filter((t=>!n(e.data[i][t])));t="string"==r?this._options.desc?(t,r)=>a(e.data[i][t])<a(e.data[i][r])?1:-1:(t,r)=>a(e.data[i][t])>a(e.data[i][r])?1:-1:this._options.desc?(t,r)=>e.data[i][t]<e.data[i][r]?1:-1:(t,r)=>e.data[i][t]>e.data[i][r]?1:-1;const d={};let h=l.sort(t);h=h.concat(s);for(const t of Object.keys(e.data)){let i=0;d[t]=[];for(const r of h)d[t][i++]=e.data[t][r]}return new o.DataSource(d,e.fields,e.schema)}}},8025:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformStateManager=void 0;const r=i(3816),a=i(7575),n=i(4053),o=i(7262),s=i(4602);t.TransformStateManager=class{constructor(){this._state={},this._changed=new s.Signal(this)}_add(e){switch(this._state.hasOwnProperty(e.column)||(this._state[e.column]={sort:void 0,filter:void 0}),e.type){case"sort":for(const e of Object.keys(this._state))this._state[e].sort=void 0;this._state[e.column].sort=e;break;case"filter":this._state[e.column].filter=e;break;default:throw"unreachable"}}add(e){try{this._add(e),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}replace(e){if(!o.JSONExt.deepEqual(e,this.activeTransforms))try{this._state={},n.each(e,(e=>{this._add(e)})),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}createView(e){const t=this._createExecutors(e);let i=e;return n.each(t,(e=>{i=e.apply(i)})),new r.View(i)}_createExecutors(e){const t=[],i=[];return Object.keys(this._state).forEach((r=>{const n=this._state[r];if(n.sort){let i="";for(const t of e.schema.fields)t.name===n.sort.column&&(i=t.type);const r=new a.SortExecutor({field:n.sort.column,dType:i,desc:n.sort.desc});t.push(r)}if(n.filter){let t="";for(const i of e.schema.fields)i.name===n.filter.column&&(t=i.type);const r=new a.FilterExecutor({field:n.filter.column,dType:t,operator:n.filter.operator,value:n.filter.value});i.push(r)}})),[...i,...t]}remove(e,t){if(this._state.hasOwnProperty(e))try{const i=this._state[e];if("sort"===t)i.sort=void 0;else{if("filter"!==t)throw"unreachable";i.filter=void 0}i.sort||i.filter||delete this._state[e],this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}metadata(e){return this._state.hasOwnProperty(e)?this._state[e]:void 0}clear(){this._state={},this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}get changed(){return this._changed}get activeTransforms(){const e=[];return n.each(Object.keys(this._state),(t=>{this._state[t].sort&&e.push(this._state[t].sort),this._state[t].filter&&e.push(this._state[t].filter)})),e}getFilterTransform(e){if(this._state.hasOwnProperty(e))return this._state[e].filter}}},1339:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterValueRenderer=void 0;const r=i(7088),a=i(5976);class n extends r.TextRenderer{constructor(e){super({textColor:e.textColor,backgroundColor:e.backgroundColor}),this._stateManager=e.stateManager,this._dialog=e.dialog}drawText(e,t){const i=r.CellRenderer.resolveOption(this.font,t);if(!i)return;const n=r.CellRenderer.resolveOption(this.textColor,t);if(!n)return;const o=(0,this.format)(t);if(!o)return;const s=r.CellRenderer.resolveOption(this.verticalAlignment,t),l=r.CellRenderer.resolveOption(this.horizontalAlignment,t),d=t.height-("center"===s?1:2);if(d<=0)return;const h=r.TextRenderer.measureFontHeight(i);let c,u;switch(s){case"top":u=t.y+2+h;break;case"center":u=t.y+t.height/2+h/2;break;case"bottom":u=t.y+t.height-2;break;default:throw"unreachable"}switch(l){case"left":c=t.x+2;break;case"center":c=t.x+t.width/2;break;case"right":c=t.x+t.width-3;break;default:throw"unreachable"}h>d&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=i,e.fillStyle=n,e.textAlign=l,e.textBaseline="bottom",e.fillText(o,c+25,u),e.fillStyle=a.Theme.getBorderColor(1),e.fillStyle="#ffffff",e.fillRect(t.x+5,t.y+5,10,10),e.fillStyle="#000000",e.strokeRect(t.x+5,t.y+5,10,10),this._getCheckedState(t)&&(e.beginPath(),e.strokeStyle="#000000",e.moveTo(t.x+5+3,t.y+5+5),e.lineTo(t.x+5+4,t.y+5+8),e.lineTo(t.x+5+8,t.y+5+2),e.lineWidth=2,e.stroke())}_getCheckedState(e){return this._stateManager.has(this._dialog.region,this._dialog.column,e.value)||!this._dialog.hasFilter&&!this._dialog.userInteractedWithDialog}}t.FilterValueRenderer=n},3816:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{constructor(e){const t=i.splitFields(e.schema);this._data=e,this._bodyFields=t.bodyFields,this._headerFields=t.headerFields,this._missingValues=i.createMissingMap(e.schema)}rowCount(e){var t,i;return"body"===e?this._data.length:null!==(i=null===(t=this._bodyFields[0])||void 0===t?void 0:t.rows.length)&&void 0!==i?i:1}columnCount(e){return"body"===e?this._bodyFields.length:this._headerFields.length}metadata(e,t,i){return"body"===e||"column-header"===e?Object.assign({row:t,column:i},this._bodyFields[i]):Object.assign({row:t,column:i},this._headerFields[i])}data(e,t,i){let r,a;switch(e){case"body":r=this._bodyFields[i],a=this._data.data[r.name][t];break;case"column-header":r=this._bodyFields[i],a=r.rows[t];break;case"row-header":r=this._headerFields[i],a=this._data.data[r.name][t];break;case"corner-header":r=this._headerFields[i],a=r.rows[t];break;default:throw"unreachable"}return null!==this._missingValues&&"string"==typeof a&&!0===this._missingValues[a]?null:a}get dataset(){return this._data}getSchemaIndex(e,t){return"corner-header"===e?t:this._headerFields.length+t}uniqueValues(e,t){return Array.from(new Set(this.dataset.data[t]))}},function(e){e.splitFields=function(e){let t;t=void 0===e.primaryKey?[]:"string"==typeof e.primaryKey?[e.primaryKey]:e.primaryKey;const i=[],r=[];for(const a of e.fields)a.rows[0]!=e.primaryKeyUuid&&(-1===t.indexOf(a.name)?i.push(a):r.push(a));return{bodyFields:i,headerFields:r}},e.createMissingMap=function(e){if(!e.missingValues||0===e.missingValues.length)return null;const t=Object.create(null);for(const i of e.missingValues)t[i]=!0;return t}}(i||(i={}))},4766:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ViewBasedJSONModel=void 0;const r=i(7088),a=i(4602),n=i(3816),o=i(8025),s=i(5976);class l extends r.MutableDataModel{constructor(e){super(),this._transformSignal=new a.Signal(this),this._dataSyncSignal=new a.Signal(this),this._primaryKeyMap=new Map,this.updateDataset(e),this._transformState=new o.TransformStateManager,this._transformState.changed.connect(((e,t)=>{this._transformStateChangedHandler(e,t)}));const t=s.ArrayUtils.generateMultiIndexArrayLocations(this);let i=s.ArrayUtils.generateColMergedCellLocations(this,t);s.ArrayUtils.validateMergingHierarchy(i)||(i=[]),this._mergedColumnCellLocations=i,this._columnCellGroups=s.ArrayUtils.generateColumnCellGroups(this._mergedColumnCellLocations);let r=s.ArrayUtils.generateRowMergedCellLocations(this);s.ArrayUtils.validateMergingHierarchy(r)||(r=[]),this._mergedRowCellLocations=r,this._rowCellGroups=s.ArrayUtils.generateRowCellGroups(this._mergedRowCellLocations)}updateDataset(e){this._dataset=e.datasource,this._updatePrimaryKeyMap();const t=new n.View(this._dataset);this.currentView=t}_updatePrimaryKeyMap(){this._primaryKeyMap.clear();const e=this._dataset.schema.primaryKey;for(let t=0;t<this._dataset.length;t++){const i=e.map((e=>this._dataset.data[e][t]));this._primaryKeyMap.set(JSON.stringify(i),t)}}areCellsMerged(e,t){const[i,r]=t,a=this.getMergedSiblingCells(e);for(const e of a)if(i===e[0]&&r===e[1])return!0;return!1}getMergedSiblingCells(e){const[t,i]=e;if(t<0||i<0||t>=this._mergedColumnCellLocations.length)return[];for(const e of this._mergedColumnCellLocations[t])for(const r of e){const[a,n]=r;if(t===a&&i==n)return e}return[]}rowCount(e){return this.currentView.rowCount(e)}columnCount(e){return this.currentView.columnCount(e)}groupCount(e){return"body"===e?0:"column-header"===e?this._columnCellGroups.length:"row-header"===e?this._rowCellGroups.length:0}group(e,t){return"column-header"===e?this._columnCellGroups[t]:"row-header"===e?this._rowCellGroups[t]:null}metadata(e,t,i){const r=this.currentView.metadata(e,t,i);return"body"==e&&(r.row=t,r.column=i,r.data=(e,t)=>{const i=this.columnNameToIndex(t.toString());return this.data("body",e,i)}),r}data(e,t,i){return this.currentView.data(e,t,i)}setData(e,t,i,r){const a=this.getDatasetRowFromView(e,t);return this.updateCellValue({region:e,row:a,column:i,value:r}),this.emitChanged({type:"cells-changed",region:e,row:t,column:i,rowSpan:1,columnSpan:1}),!0}setModelData(e,t,i,r){return this.updateCellValue({region:e,row:t,column:i,value:r}),this.emitChanged({type:"cells-changed",region:e,row:t,column:i,rowSpan:1,columnSpan:1}),!0}setRowData(e,t){return this.updateRowValue({row:e,value:t}),this.emitChanged({type:"cells-changed",region:"body",row:e,column:0,rowSpan:1,columnSpan:1}),!0}columnNameToIndex(e){const t=this.dataset.schema,i=t.primaryKey.length-1;let r=-1;return t.primaryKey.includes(e)?r=t.primaryKey.indexOf(e):t.fields.forEach(((t,a)=>{t.name==e&&(r=a-i)})),r}columnIndexToName(e,t){const i=this.dataset.schema;return"row-header"==t?i.primaryKey[e]:i.fields[i.primaryKey.length+e-1].name}columnNameToRegion(e){return this.dataset.schema.primaryKey.includes(e)?"row-header":"body"}get currentView(){return this._currentView}set currentView(e){this._currentView=e,this.emitChanged({type:"model-reset"});const t=Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey],i=[];for(let r=0;r<e.dataset.length;r++){const a=JSON.stringify(t.map((t=>e.dataset.data[t][r]))),n=this._primaryKeyMap.get(a);i.push(void 0===n?r:n)}this.dataSync.emit({type:"row-indices-updated",indices:i})}addTransform(e){this._transformState.add(e)}removeTransform(e,t){this._transformState.remove(e,t)}replaceTransforms(e){this._transformState.replace(e)}clearTransforms(){this._transformState.clear()}transformMetadata(e){return this._transformState.metadata(e)}uniqueValues(e,t){return Promise.resolve(Array.from(new Set(this.dataset.data[t])))}async uniqueValuesVisible(e,t){return this._currentView.uniqueValues(e,t)}get transformStateChanged(){return this._transformSignal}get activeTransforms(){return this._transformState.activeTransforms}getFilterTransform(e){return this._transformState.getFilterTransform(e)}getDatasetRowFromView(e,t){if("column-header"==e||"corner-header"==e)return t;const i=(Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey]).map((e=>this._currentView.dataset.data[e][t]));return this._primaryKeyMap.get(JSON.stringify(i))}updateCellValue(e){if("body"!==e.region)return;const t=this.metadata("body",0,e.column).name;this._dataset.data[t][e.row]=e.value,this.dataSync.emit({type:"cell-edit-event",column:t,columnIndex:e.column,row:e.row,region:e.region,value:e.value}),this.currentView=this._transformState.createView(this._dataset)}updateRowValue(e){for(const t of Array(e.value.length).keys()){const i=this.metadata("body",0,t).name;this._dataset.data[i][e.row]=e.value[t]}this.currentView=this._transformState.createView(this._dataset)}get dataSync(){return this._dataSyncSignal}get dataset(){return this._dataset}getSchemaIndex(e,t){return this.currentView.getSchemaIndex(e,t)}_transformStateChangedHandler(e,t){this.currentView=this._transformState.createView(this._dataset),this._transformSignal.emit(t)}}t.ViewBasedJSONModel=l},7673:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingDataGridView=t.StreamingDataGridModel=t.VegaExprView=t.VegaExprModel=t.HtmlRendererView=t.HtmlRendererModel=t.TextRendererView=t.TextRendererModel=t.HyperlinkRendererView=t.HyperlinkRendererModel=t.ImageRendererView=t.ImageRendererModel=t.BarRendererView=t.BarRendererModel=t.DataGridView=t.DataGridModel=void 0;const o=n(i(4232)),s=i(7088),l=i(7262),d=i(6230),h=i(5256),c=i(3909),u=i(6738),m=i(1242),g=i(4766),p=i(6682),_=i(1797),f=i(4470),y=i(7466),b=i(5976);i(1859);class w extends c.DOMWidgetModel{constructor(){super(...arguments),this.synchingWithKernel=!1}defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_module:w.model_module,_model_module_version:w.model_module_version,_view_name:w.view_name,_view_module:w.view_module,_view_module_version:w.view_module_version,_visible_rows:[],_transforms:[],baseRowSize:20,baseColumnSize:64,baseRowHeaderSize:64,baseColumnHeaderSize:20,headerVisibility:"all",_data:{},renderers:{},corner_renderer:null,default_renderer:null,header_renderer:null,selection_mode:"none",selections:[],grid_style:{},editable:!1,column_widths:{},horizontal_stripes:!1,vertical_stripes:!1,_transform_on_backend:!1})}initialize(e,t){super.initialize(e,t),this.updateDataSync=this.updateDataSync.bind(this),this.syncTransformState=this.syncTransformState.bind(this),this.on("change:_data",this.updateData.bind(this)),this.on("change:_transforms",this.updateTransforms.bind(this)),this.on("change:selection_mode",this.updateSelectionModel,this),this.on("change:selections",this.updateSelections,this),this.updateData(),this.updateTransforms(),this.updateSelectionModel(),this.on("msg:custom",(e=>{"cell-changed"===e.event_type&&this.data_model.setModelData("body",e.row,e.column_index,e.value),"row-changed"===e.event_type&&this.data_model.setRowData(e.row,e.value)}))}updateDataSync(e,t){switch(t.type){case"row-indices-updated":this.set("_visible_rows",t.indices),this.save_changes();break;case"cell-edit-event":const e=this.get("_data");e.data[t.column][t.row]=t.value,this.set("_data",e),this.send({event_type:"cell-changed",region:t.region,row:t.row,column_index:t.columnIndex,value:t.value},Object.assign({},this._view_callbacks));break;default:throw"unreachable"}}syncTransformState(e,t){this.set("_transforms",t.transforms),this.save_changes()}updateData(){const e=this.data;this.data_model&&(this.data_model.updateDataset({datasource:e}),this.data_model.transformStateChanged.disconnect(this.syncTransformState),this.data_model.dataSync.disconnect(this.updateDataSync)),this.data_model=new g.ViewBasedJSONModel({datasource:e}),this.data_model.transformStateChanged.connect(this.syncTransformState),this.data_model.dataSync.connect(this.updateDataSync),this.updateTransforms(),this.trigger("data-model-changed"),this.updateSelectionModel()}updateTransforms(){const e=this.get("_transforms");this.get("_transform_on_backend")||this.selectionModel&&this.selectionModel.clear(),this.data_model.replaceTransforms(e)}updateSelectionModel(){this.selectionModel&&this.selectionModel.clear();const e=this.get("selection_mode");"none"!==e?(this.selectionModel=new s.BasicSelectionModel({dataModel:this.data_model}),this.selectionModel.selectionMode=e,this.trigger("selection-model-changed"),this.selectionModel.changed.connect(((e,t)=>{if(this.synchingWithKernel)return;this.synchingWithKernel=!0;const i=[];let r=e.selections();if("function"==typeof r.iter){let e=null;for(r=r.iter();e=r.next();)i.push({r1:Math.min(e.r1,e.r2),r2:Math.max(e.r1,e.r2),c1:Math.min(e.c1,e.c2),c2:Math.max(e.c1,e.c2)})}else{let e=null;for(;(e=r.next())&&!e.done;){const t=e.value;i.push({r1:Math.min(t.r1,t.r2),r2:Math.max(t.r1,t.r2),c1:Math.min(t.c1,t.c2),c2:Math.max(t.c1,t.c2)})}}this.set("selections",i),this.save_changes(),this.synchingWithKernel=!1}),this)):this.selectionModel=null}updateSelections(){if(!this.selectionModel||this.synchingWithKernel)return;this.synchingWithKernel=!0;const e=this.get("selections");this.selectionModel.clear();for(const t of e)this.selectionModel.select({r1:t.r1,c1:t.c1,r2:t.r2,c2:t.c2,cursorRow:t.r1,cursorColumn:t.c1,clear:"none"});this.synchingWithKernel=!1}get data(){return this.get("_data")}}t.DataGridModel=w,w.serializers=Object.assign(Object.assign({},c.DOMWidgetModel.serializers),{transforms:{deserialize:c.unpack_models},renderers:{deserialize:c.unpack_models},corner_renderer:{deserialize:c.unpack_models},default_renderer:{deserialize:c.unpack_models},header_renderer:{deserialize:c.unpack_models},_data:{deserialize:m.deserialize_data,serialize:function(e,t){const i={};for(const r of Object.keys(e.data))i[r]=u.array_or_json_serializer.serialize(e.data[r],t);return{data:i,fields:e.fields,schema:e.schema}}},grid_style:{deserialize:function e(t,i){if(t instanceof Object&&"string"!=typeof t){const r={};return Object.keys(t).forEach((a=>{r[function(e){e=e.toLowerCase();const t=[];for(let i=0;i<e.length;i++){const r=e.charAt(i);"_"!==r?t.push(r):(i++,t.push(e.charAt(i).toUpperCase()))}return t.join("")}(a)]=e(t[a],i)})),c.resolvePromisesDict(r)}return"string"==typeof t&&"IPY_MODEL_"===t.slice(0,10)?Promise.resolve(i.get_model(t.slice(10,t.length))).then((e=>e._function)):Promise.resolve(t)}}}),w.model_name="DataGridModel",w.model_module=_.MODULE_NAME,w.model_module_version=_.MODULE_VERSION,w.view_name="DataGridView",w.view_module=_.MODULE_NAME,w.view_module_version=_.MODULE_VERSION;class v extends c.DOMWidgetView{constructor(){super(...arguments),this.manageResizeEvent=()=>{d.MessageLoop.postMessage(this.luminoWidget,h.Widget.ResizeMessage.UnknownSize)}}_createElement(e){const t=x.getWidgetPanel();return this.luminoWidget=new t({view:this}),this._initializeTheme(),this.luminoWidget.node}get pWidget(){return this.luminoWidget}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node}_processLuminoMessage(e,t){t.call(this,e),"after-show"===e.type&&this.luminoWidget.isVisible&&this.manageResizeEvent()}processLuminoMessage(e){this._processLuminoMessage(e,super.processLuminoMessage)}processPhosphorMessage(e){this._processLuminoMessage(e,super.processPhosphorMessage)}_createGrid(){return new f.FeatherGrid({defaultSizes:{rowHeight:this.model.get("base_row_size"),columnWidth:this.model.get("base_column_size"),rowHeaderWidth:this.model.get("base_row_header_size"),columnHeaderHeight:this.model.get("base_column_header_size")},headerVisibility:this.model.get("header_visibility"),style:this.model.get("grid_style")})}render(){return this.el.classList.add("datagrid-container"),window.addEventListener("resize",this.manageResizeEvent),this.once("remove",(()=>{window.removeEventListener("resize",this.manageResizeEvent)})),this.grid=this._createGrid(),this.grid.columnWidths=this.model.get("column_widths"),this.grid.editable=this.model.get("editable"),this.grid.isLightTheme=this._isLightTheme,this.grid.dataModel=this.model.data_model,this.grid.selectionModel=this.model.selectionModel,this.grid.backboneModel=this.model,this.grid.cellClicked.connect(((e,t)=>{this.model.comm&&this.send({event_type:"cell-click",region:t.region,column:t.column,column_index:t.columnIndex,row:t.row,primary_key_row:t.primaryKeyRow,cell_value:t.cellValue})})),this.grid.columnsResized.connect(((e,t)=>{this.model.set("column_widths",l.JSONExt.deepCopy(this.grid.columnWidths)),this.model.save_changes()})),this.model._view_callbacks=this.callbacks(),this.model.on("data-model-changed",(()=>{this.grid.dataModel=this.model.data_model,this.handleColumnAutoFit()})),this.model.on("change:base_row_size",(()=>{this.grid.baseRowSize=this.model.get("base_row_size")})),this.model.on("change:base_column_size",(()=>{this.grid.baseColumnSize=this.model.get("base_column_size")})),this.model.on("change:column_widths",(()=>{this.grid.columnWidths=this.model.get("column_widths")})),this.model.on("change:base_row_header_size",(()=>{this.grid.baseRowHeaderSize=this.model.get("base_row_header_size")})),this.model.on("change:base_column_header_size",(()=>{this.grid.baseColumnHeaderSize=this.model.get("base_column_header_size")})),this.model.on("change:header_visibility",(()=>{this.grid.headerVisibility=this.model.get("header_visibility")})),this.model.on_some_change(["corner_renderer","header_renderer","default_renderer","renderers","grid_style"],(()=>{this.updateRenderers().then(this.updateGridStyle.bind(this)).then(this.updateGridRenderers.bind(this))}),this),this.model.on("selection-model-changed",(()=>{this.grid.selectionModel=this.model.selectionModel})),this.model.on("change:editable",(()=>{this.grid.editable=this.model.get("editable")})),this.model.on_some_change(["auto_fit_columns","auto_fit_params"],(()=>{this.handleColumnAutoFit()}),this),this.model.get("auto_fit_columns")&&this.handleColumnAutoFit(),this.updateRenderers().then((()=>{this.updateGridStyle(),this.updateGridRenderers(),this.luminoWidget.addWidget(this.grid)}))}handleColumnAutoFit(){if(!this.model.get("auto_fit_columns"))return void(this.grid.baseColumnSize=this.model.get("base_column_size"));let{area:e,padding:t,numCols:i}=this.model.get("auto_fit_params");e=null!=e?e:"all",t=null!=t?t:30,i=null!=i?i:void 0,this.grid.grid.fitColumnNames(e,t,i)}updateRenderers(){this.default_renderer&&this.stopListening(this.default_renderer,"renderer-changed"),this.header_renderer&&this.stopListening(this.header_renderer,"renderer-changed"),this.corner_renderer&&this.stopListening(this.corner_renderer,"renderer-changed");for(const e in this.renderers)this.stopListening(this.renderers[e],"renderer-changed");const e=[],t=this.model.get("default_renderer");e.push(this.create_child_view(t).then((e=>{this.default_renderer=e,this.listenTo(this.default_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const i=this.model.get("corner_renderer");i&&e.push(this.create_child_view(i).then((e=>{this.corner_renderer=e,this.listenTo(this.corner_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const r=this.model.get("header_renderer");r&&e.push(this.create_child_view(r).then((e=>{this.header_renderer=e,this.listenTo(this.header_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const a={};return o.each(this.model.get("renderers"),((e,t)=>{a[t]=this.create_child_view(e)})),e.push(c.resolvePromisesDict(a).then((e=>{this.renderers=e;for(const t in e)this.listenTo(e[t],"renderer-changed",this.updateGridRenderers.bind(this))}))),Promise.all(e)}updateGridStyle(){this.grid.updateGridStyle()}set isLightTheme(e){this._isLightTheme=e,this.grid&&(this.grid.isLightTheme=e)}get isLightTheme(){return this._isLightTheme}updateGridRenderers(){let e=this.default_renderer.renderer;(this.grid.grid.style.backgroundColor!==b.Theme.getBackgroundColor()||this.grid.grid.style.rowBackgroundColor||this.grid.grid.style.columnBackgroundColor)&&(e=new s.TextRenderer(Object.assign(Object.assign({},this.default_renderer.renderer),{backgroundColor:void 0})));const t=null!==this.model.get("header_renderer");let i=null;i=this.header_renderer&&t?this.header_renderer.renderer:new s.TextRenderer({font:"12px sans-serif",textColor:b.Theme.getFontColor(),backgroundColor:b.Theme.getBackgroundColor(2)});let r=null;this.corner_renderer&&(r=this.corner_renderer.renderer);const a={};Object.entries(this.renderers).forEach((([e,t])=>{a[e]=t.renderer})),this.grid.defaultRenderer=e,this.grid.columnHeaderRenderer=i,r&&(this.grid.cornerHeaderRenderer=r),this.grid.renderers=a}_initializeTheme(){void 0===this._isLightTheme&&(this._isLightTheme=!(document.body.classList.contains("theme-dark")||"false"===document.body.dataset.jpThemeLight))}}t.DataGridView=v;var C=i(7270);Object.defineProperty(t,"BarRendererModel",{enumerable:!0,get:function(){return C.BarRendererModel}}),Object.defineProperty(t,"BarRendererView",{enumerable:!0,get:function(){return C.BarRendererView}}),Object.defineProperty(t,"ImageRendererModel",{enumerable:!0,get:function(){return C.ImageRendererModel}}),Object.defineProperty(t,"ImageRendererView",{enumerable:!0,get:function(){return C.ImageRendererView}}),Object.defineProperty(t,"HyperlinkRendererModel",{enumerable:!0,get:function(){return C.HyperlinkRendererModel}}),Object.defineProperty(t,"HyperlinkRendererView",{enumerable:!0,get:function(){return C.HyperlinkRendererView}}),Object.defineProperty(t,"TextRendererModel",{enumerable:!0,get:function(){return C.TextRendererModel}}),Object.defineProperty(t,"TextRendererView",{enumerable:!0,get:function(){return C.TextRendererView}}),Object.defineProperty(t,"HtmlRendererModel",{enumerable:!0,get:function(){return C.HtmlRendererModel}}),Object.defineProperty(t,"HtmlRendererView",{enumerable:!0,get:function(){return C.HtmlRendererView}});var x,M=i(8479);Object.defineProperty(t,"VegaExprModel",{enumerable:!0,get:function(){return M.VegaExprModel}}),Object.defineProperty(t,"VegaExprView",{enumerable:!0,get:function(){return M.VegaExprView}}),function(e){e.getWidgetPanel=function(){return null!==c.JupyterLuminoPanelWidget&&void 0!==c.JupyterLuminoPanelWidget?c.JupyterLuminoPanelWidget:c.JupyterPhosphorPanelWidget}}(x||(x={}));class S extends w{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:S.model_name,_view_name:S.view_name,_row_count:0,_data:{},_debounce_delay:160,_transform_on_backend:!0})}initialize(e,t){super.initialize(e,t),this.on("change:_row_count",(()=>{const e=this.get("_row_count");if(e!=this.data_model.rowCount("body")){const t=this.data_model.currentView;t.setRowCount(e),this.data_model.currentView=t}})),this.on("msg:custom",((e,t)=>{if("data-reply"===e.event_type){for(const i of Object.keys(e.value.data))"raw"!==e.value.data[i].type&&(e.value.data[i].value=t[e.value.data[i].value]);const i=m.deserialize_data(e.value,null);this.data_model.setModelRangeData(e.r1,e.r2,e.c1,e.c2,i)}}))}updateData(){const e=this.data;this.data_model&&(this.data_model.updateDataset({dataModel:this,datasource:e,rowCount:this.get("_row_count")}),this.data_model.transformStateChanged.disconnect(this.syncTransformState),this.data_model.dataSync.disconnect(this.updateDataSync)),this.data_model=new p.StreamingViewBasedJSONModel({dataModel:this,datasource:this.data,rowCount:this.get("_row_count")}),this.data_model.transformStateChanged.connect(this.syncTransformState),this.data_model.dataSync.connect(this.updateDataSync),this.updateTransforms(),this.trigger("data-model-changed"),this.updateSelectionModel()}requestData(e,t,i,r){this.send({type:"data-request",r1:e,r2:t,c1:i,c2:r})}}t.StreamingDataGridModel=S,S.model_name="StreamingDataGridModel",S.view_name="StreamingDataGridView",t.StreamingDataGridView=class extends v{initialize(e){super.initialize(e),this.model.on("msg:custom",((e,t)=>{"tick"!==e.event_type||this.grid.tick()}))}_createGrid(){return new y.StreamingFeatherGrid({defaultSizes:{rowHeight:this.model.get("base_row_size"),columnWidth:this.model.get("base_column_size"),rowHeaderWidth:this.model.get("base_row_header_size"),columnHeaderHeight:this.model.get("base_column_header_size")},headerVisibility:this.model.get("header_visibility"),style:this.model.get("grid_style"),debounceDelay:this.model.get("_debounce_delay"),requestData:this.requestData.bind(this)})}requestData(e,t,i,r){this.model.requestData(e,t,i,r)}}},1608:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0,t.DataSource=class{constructor(e,t,i,r=!1){this._data=Object.assign({},e),r?(this._fields=t,this._schema=this._createSchema(t,i)):(this._fields=t,this._schema=i),this._columns=Object.keys(this._data)}get data(){return this._data}get fields(){return this._fields}get schema(){return this._schema}get columns(){return this._columns}get length(){return 0==this._columns.length?0:this.data[this._columns[0]].length}setColumns(e){this._columns=e}_createSchema(e,t){const i=[];return e.forEach(((e,r)=>{const a=Array.isArray(t.fields[r].name)?t.fields[r].name:[t.fields[r].name],n={name:Object.keys(e)[0],type:t.fields[r].type,rows:a};i.push(n)})),{primaryKey:t.primaryKey.map((i=>{for(let r=0;r<t.fields.length;r++)if((Array.isArray(i)?t.fields[r].name[0]:t.fields[r].name)==(Array.isArray(i)?i[0]:i))return Object.keys(e[r])[0];return"unreachable"})),primaryKeyUuid:t.primaryKeyUuid,fields:i}}}},4470:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGrid=void 0;const r=i(6167),a=i(7088),n=i(6230),o=i(4602),s=i(5256),l=i(3256),d=i(1229),h=i(7323),c=i(9448),u=i(4576),m=i(5976);i(9469),i(1734);const g=new Map([["--ipydatagrid-filter-icon",["var(--ipydatagrid-filter-icon-light)","var(--ipydatagrid-filter-icon-dark)"]],["--ipydatagrid-sort-asc-icon",["var(--ipydatagrid-sort-asc-icon-light)","var(--ipydatagrid-sort-asc-icon-dark)"]],["--ipydatagrid-sort-desc-icon",["var(--ipydatagrid-sort-desc-icon-light)","var(--ipydatagrid-sort-desc-icon-dark)"]],["--ipydatagrid-layout-color0",["white","#111111"]],["--ipydatagrid-layout-color1",["white","#212121"]],["--ipydatagrid-layout-color2",["#eeeeee","#424242"]],["--ipydatagrid-layout-color3",["#bdbdbd","#616161"]],["--ipydatagrid-layout-color4",["#757575","#757575"]],["--ipydatagrid-ui-font-color0",["rgba(0, 0, 0, 1)","rgba(255, 255, 255, 1)"]],["--ipydatagrid-ui-font-color1",["rgba(0, 0, 0, 0.87)","rgba(255, 255, 255, 0.87)"]],["--ipydatagrid-ui-font-color2",["rgba(0, 0, 0, 0.54)","rgba(255, 255, 255, 0.54)"]],["--ipydatagrid-ui-font-color3",["rgba(0, 0, 0, 0.38)","rgba(255, 255, 255, 0.38)"]],["--ipydatagrid-border-color0",["#bdbdbd","#616161"]],["--ipydatagrid-border-color1",["#bdbdbd","#616161"]],["--ipydatagrid-border-color2",["#e0e0e0","#424242"]],["--ipydatagrid-border-color3",["#eeeeee","#212121"]],["--ipydatagrid-brand-color0",["#1976d2","#1976d2"]],["--ipydatagrid-brand-color1",["#2196f3","#2196f3"]],["--ipydatagrid-brand-color2",["#64b5f6","#64b5f6"]],["--ipydatagrid-brand-color3",["#bbdefb","#bbdefb"]],["--ipydatagrid-brand-color4",["#e3f2fd","#e3f2fd"]],["--ipydatagrid-brand-color5",["#00e6ff","#00e6ff"]],["--ipydatagrid-brand-color6",["#ffe100","#ffe100"]],["--ipydatagrid-brand-color7",["#009eb0","#009eb0"]],["--ipydatagrid-brand-color8",["#b09b00","#b09b00"]],["--ipydatagrid-menu-bgcolor",["white","black"]],["--ipydatagrid-menu-border-color",["#bdbdbd","#616161"]],["--ipydatagrid-filter-dlg-textcolor",["black","white"]],["--ipydatagrid-filter-dlg-bgcolor",["white","black"]]]);class p extends s.Widget{constructor(e={}){super(),this._baseRowSize=20,this._baseColumnSize=64,this._baseRowHeaderSize=64,this._baseColumnHeaderSize=20,this._columnWidths={},this._headerVisibility="all",this._renderers={},this._defaultRendererSet=!1,this._cellClicked=new o.Signal(this),this._columnsResized=new o.Signal(this),this._isLightTheme=!0,this.addClass("ipydatagrid-widget"),e.defaultSizes&&(this._baseRowSize=e.defaultSizes.rowHeight||this._baseRowSize,this._baseColumnSize=e.defaultSizes.columnWidth||this._baseColumnSize,this._baseRowHeaderSize=e.defaultSizes.rowHeaderWidth||this._baseRowHeaderSize,this._baseColumnHeaderSize=e.defaultSizes.columnHeaderHeight||this._baseColumnHeaderSize),this._headerVisibility=e.headerVisibility||this._headerVisibility,this._createGrid(e),this.backboneModel&&(this.grid.copyConfig=this.backboneModel.get("copy_config")),this._defaultRenderer=new a.TextRenderer({font:"12px sans-serif",textColor:m.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),horizontalAlignment:"center",verticalAlignment:"center"}),this._rowHeaderRenderer=new a.TextRenderer({textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),(this.layout=new s.PanelLayout).addWidget(this.grid)}messageHook(e,t){if(e===this.grid.viewport){const e=this.grid.mouseHandler;if("column-resize-request"===t.type&&e.mouseIsDown){const e=t,i=this.dataModel.columnIndexToName(e.index,e.region);return this._columnWidths[i]=e.size,this._columnsResized.emit(),!0}}return!0}set dataModel(e){this._dataModel=e,this.grid&&(this.grid.dataModel=this._dataModel,this._updateHeaderRenderer(),this._filterDialog.model=this._dataModel,this._updateColumnWidths())}get dataModel(){return this._dataModel}set baseRowSize(e){this._baseRowSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeight:e}))}get baseRowSize(){return this._baseRowSize}set baseColumnSize(e){this._baseColumnSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnWidth:e}),this._updateColumnWidths())}get baseColumnSize(){return this._baseColumnSize}set columnWidths(e){this._columnWidths=e,this.grid&&this._updateColumnWidths()}get columnWidths(){return this._columnWidths}set baseRowHeaderSize(e){this._baseRowHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeaderWidth:e}),this._updateColumnWidths())}get baseRowHeaderSize(){return this._baseRowHeaderSize}set baseColumnHeaderSize(e){this._baseColumnHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnHeaderHeight:e}))}get baseColumnHeaderSize(){return this._baseColumnHeaderSize}set headerVisibility(e){this._headerVisibility=e,this.grid&&(this.grid.headerVisibility=e,this._updateColumnWidths())}get headerVisibility(){return this._headerVisibility}set defaultRenderer(e){this._defaultRenderer=e,this._defaultRendererSet=!0,this.grid&&this._updateGridRenderers()}get defaultRenderer(){return this._defaultRenderer}set columnHeaderRenderer(e){const t=e;this._columnHeaderRenderer=new h.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||m.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get columnHeaderRenderer(){return this._columnHeaderRenderer}set cornerHeaderRenderer(e){const t=e;this._cornerHeaderRenderer=new h.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||m.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get cornerHeaderRenderer(){return this._cornerHeaderRenderer}set renderers(e){this._renderers=e,this.grid&&this._updateGridRenderers()}get renderers(){return this._renderers}set selectionModel(e){this._selectionModel=e,this.grid&&(this.grid.selectionModel=this._selectionModel)}set editable(e){this._editable=e,this.grid&&(this.grid.editingEnabled=e)}get editable(){return this._editable}get cellRenderers(){return this.grid.cellRenderers}_createGrid(e={}){this.grid=new a.DataGrid(Object.assign(Object.assign({},e),{defaultSizes:{rowHeight:this._baseRowSize,columnWidth:this._baseColumnSize,rowHeaderWidth:this._baseRowHeaderSize,columnHeaderHeight:this._baseColumnHeaderSize},headerVisibility:this._headerVisibility})),n.MessageLoop.installMessageHook(this.grid.viewport,this),this._filterDialog=new l.InteractiveFilterDialog({model:this._dataModel}),this.contextMenu=new d.FeatherGridContextMenu({grid:this.grid,commands:this._createCommandRegistry()}),this.grid.dataModel=this._dataModel,this.grid.keyHandler=new c.KeyHandler;const t=new u.MouseHandler(this);t.cellClicked.connect(((e,t)=>{if(!this.grid.dataModel)return;const i=this.grid.dataModel,r=t.region;this._cellClicked.emit({region:r,column:i.metadata(r,t.row,t.column).name,columnIndex:t.column,row:t.row,primaryKeyRow:i.getDatasetRowFromView(r,t.row),cellValue:i.data(r,t.row,t.column)})})),this.grid.mouseHandler=t,this.grid.selectionModel=this._selectionModel,this.grid.editingEnabled=this._editable,this.updateGridStyle(),this._updateGridRenderers(),this._updateColumnWidths()}setGridStyle(){const e={size:4,color1:m.Theme.getBorderColor(1,1),color2:m.Theme.getBorderColor(1,.5),color3:m.Theme.getBorderColor(1,0)};this.backboneModel?(this.grid.style=this.backboneModel.get("grid_style"),this.grid.style={voidColor:this.grid.style.voidColor||m.Theme.getBackgroundColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),rowBackgroundColor:this.grid.style.rowBackgroundColor||void 0,columnBackgroundColor:this.grid.style.columnBackgroundColor||void 0,gridLineColor:this.grid.style.gridLineColor||m.Theme.getBorderColor(),verticalGridLineColor:this.grid.style.verticalGridLineColor||void 0,horizontalGridLineColor:this.grid.style.horizontalGridLineColor||void 0,headerBackgroundColor:this.grid.style.headerBackgroundColor||void 0,headerGridLineColor:this.grid.style.headerGridLineColor||m.Theme.getBorderColor(1),headerVerticalGridLineColor:this.grid.style.headerVerticalGridLineColor||void 0,headerHorizontalGridLineColor:this.grid.style.headerHorizontalGridLineColor||void 0,selectionFillColor:this.grid.style.selectionFillColor||m.Theme.getBrandColor(2,.4),selectionBorderColor:this.grid.style.selectionBorderColor||m.Theme.getBrandColor(1),headerSelectionFillColor:this.grid.style.headerSelectionFillColor||m.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:this.grid.style.headerSelectionBorderColor||m.Theme.getBorderColor(1),cursorFillColor:this.grid.style.cursorFillColor||m.Theme.getBrandColor(3,.4),cursorBorderColor:this.grid.style.cursorBorderColor||m.Theme.getBrandColor(1),scrollShadow:this.grid.style.scrollShadow||e}):this.grid.style={voidColor:m.Theme.getBackgroundColor(),backgroundColor:m.Theme.getBackgroundColor(),gridLineColor:m.Theme.getBorderColor(),headerGridLineColor:m.Theme.getBorderColor(1),selectionFillColor:m.Theme.getBrandColor(2,.4),selectionBorderColor:m.Theme.getBrandColor(1),headerSelectionFillColor:m.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:m.Theme.getBorderColor(1),cursorFillColor:m.Theme.getBrandColor(3,.4),cursorBorderColor:m.Theme.getBrandColor(1),scrollShadow:e}}updateGridStyle(){this.setGridStyle(),this._defaultRendererSet&&this.backboneModel||(this.defaultRenderer=new a.TextRenderer({font:"12px sans-serif",textColor:m.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),horizontalAlignment:"left",verticalAlignment:"center"})),this._rowHeaderRenderer=new a.TextRenderer({textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),this._columnHeaderRenderer=new h.HeaderRenderer({textOptions:{textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._cornerHeaderRenderer=new h.HeaderRenderer({textOptions:{textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._updateHeaderRenderer()}downloadAsCsv(e){let t,i,r,a,n=0,o=0;const s=this.grid,l=s.dataModel;if(!l)return;const d=l.rowCount("body"),h=l.columnCount("body");if(0===d||0===h)return;let c=l.columnCount("row-header"),u=l.rowCount("column-header");const m=s.copyConfig.format,g=s.copyConfig.headers;if(e){const e=s.selectionModel;if(!e)return;const l=Array.from(e.selections());if(0===l.length)return;if(l.length>1)return void alert("Cannot save multiple grid selections.");switch(({r1:n,c1:o,r2:r,c2:a}=l[0]),n=Math.max(0,Math.min(n,d-1)),o=Math.max(0,Math.min(o,h-1)),r=Math.max(0,Math.min(r,d-1)),a=Math.max(0,Math.min(a,h-1)),r<n&&([n,r]=[r,n]),a<o&&([o,a]=[a,o]),t=r-n+1,i=a-o+1,g){case"none":c=0,u=0;break;case"row":u=0,i+=c;break;case"column":c=0,t+=u;break;case"all":t+=u,i+=c;break;default:throw"unreachable"}}else t=d+u,i=h+c;const p={region:"body",row:0,column:0,value:null,metadata:{}},_=new Array(t);for(let e=0;e<t;++e){const t=new Array(i);for(let r=0;r<i;++r){let i,a,s;e<u&&r<c?(i="corner-header",a=e,s=r):e<u?(i="column-header",a=e,s=r-c+o):r<c?(i="row-header",a=e-u+n,s=r):(i="body",a=e-u+n,s=r-c+o),p.region=i,p.row=a,p.column=s,p.value=l.data(i,a,s),p.metadata=l.metadata(i,a,s),t[r]=m(p)}_[e]=t}const f=_.map((e=>e.join(","))).join("\n"),y=new Blob([f],{type:"text/csv"}),b=document.createElement("a");b.download="out.csv",b.href=window.URL.createObjectURL(y),document.body.appendChild(b),b.click(),document.body.removeChild(b)}get cellClicked(){return this._cellClicked}get columnsResized(){return this._columnsResized}set isLightTheme(e){this._isLightTheme=e;let t=0;e?this.removeClass("dark"):(this.addClass("dark"),t=1);const i=document.documentElement;g.forEach(((e,r)=>{i.style.setProperty(r,e[t])})),this.updateGridStyle()}get isLightTheme(){return this._isLightTheme}_rendererResolver(e){const t=e.metadata.name,i=e.region;return this._renderers.hasOwnProperty(t)?this._renderers[t]:"row-header"===i?this._rowHeaderRenderer:this._defaultRenderer}_updateGridRenderers(){this.grid.cellRenderers.update({body:this._rendererResolver.bind(this)}),this.grid.cellRenderers.update({"row-header":this._rendererResolver.bind(this)})}_updateColumnWidths(){const e=this._columnWidths,t=this.grid.mouseHandler;if(t&&t.isResizing)return;if("row"===this._headerVisibility||"all"===this._headerVisibility){const t=this._baseRowHeaderSize,i=this.grid.columnCount("row-header");for(let r=0;r<i;r++){const i=this.dataModel.columnIndexToName(r,"row-header"),a=e.hasOwnProperty(i)?e[i]:t;this.grid.resizeColumn("row-header",r,a)}}const i=this._baseColumnSize,r=this.grid.columnCount("body");for(let t=0;t<r;t++){const r=this.dataModel.columnIndexToName(t,"body"),a=e.hasOwnProperty(r)?e[r]:i;this.grid.resizeColumn("body",t,a)}}_updateHeaderRenderer(){this.grid.cellRenderers.update({"column-header":this._columnHeaderRenderer});let e=!1;this.backboneModel&&(e=null!==this.backboneModel.get("corner_renderer")),this.grid.cellRenderers.update({"corner-header":e?this._cornerHeaderRenderer:this._columnHeaderRenderer})}_createCommandRegistry(){const e=new r.CommandRegistry;return e.addCommand(d.FeatherGridContextMenu.CommandID.SortAscending,{label:"Sort Ascending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortAsc",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._dataModel.addTransform({type:"sort",column:r,columnIndex:i,desc:!1})}}),e.addCommand(d.FeatherGridContextMenu.CommandID.SortDescending,{label:"Sort Descending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortDesc",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._dataModel.addTransform({type:"sort",column:r,columnIndex:i,desc:!0})}}),e.addCommand(d.FeatherGridContextMenu.CommandID.ClearThisFilter,{label:"Clear This Filter",mnemonic:-1,execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._dataModel.removeTransform(r,"filter")}}),e.addCommand(d.FeatherGridContextMenu.CommandID.ClearFiltersInAllColumns,{label:"Clear Filters in All Columns",mnemonic:-1,execute:e=>{const t=this._dataModel.activeTransforms.filter((e=>"filter"!==e.type));this._dataModel.replaceTransforms(t)}}),e.addCommand(d.FeatherGridContextMenu.CommandID.OpenFilterByConditionDialog,{label:"Filter by condition...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,column:r,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"condition"})}}),e.addCommand(d.FeatherGridContextMenu.CommandID.OpenFilterByValueDialog,{label:"Filter by value...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,column:r,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"value"})}}),e.addCommand(d.FeatherGridContextMenu.CommandID.CopySelectionToClipboard,{label:"Copy Selection to Clipboard",mnemonic:-1,isEnabled:()=>null!==this.grid.selectionModel&&!this.grid.selectionModel.isEmpty,execute:()=>{this.grid.copyToClipboard()}}),e.addCommand(d.FeatherGridContextMenu.CommandID.SaveSelectionAsCsv,{label:"Download Selection as CSV",mnemonic:-1,isEnabled:()=>null!==this.grid.selectionModel&&!this.grid.selectionModel.isEmpty,execute:()=>{this.downloadAsCsv(!0)}}),e.addCommand(d.FeatherGridContextMenu.CommandID.SaveAllAsCsv,{label:"Download All as CSV",mnemonic:-1,execute:()=>{this.downloadAsCsv(!1)}}),e.addCommand(d.FeatherGridContextMenu.CommandID.SortClear,{label:"No Sort",mnemonic:1,execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex),r=this.dataModel.currentView.dataset.columns[i];this._dataModel.removeTransform(r,"sort")}}),e.addCommand(d.FeatherGridContextMenu.CommandID.ClearSelection,{label:"Clear Selection",mnemonic:-1,execute:()=>{var e;null===(e=this.grid.selectionModel)||void 0===e||e.clear()}}),e}}t.FeatherGrid=p},9448:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyHandler=void 0;const r=i(7088);class a extends r.BasicKeyHandler{constructor(){super()}onEscape(e,t){e.selectionModel&&(e.selectionModel.selections().next()?e.selectionModel.clear():(-1===document.body.tabIndex&&(document.body.tabIndex=0),document.body.focus()))}}t.KeyHandler=a},4576:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MouseHandler=void 0;const r=i(7088),a=i(6209),n=i(4602),o=i(7323);class s extends r.BasicMouseHandler{constructor(e){super(),this._mouseIsDown=!1,this._cellClicked=new n.Signal(this),this._grid=e}onMouseDown(e,t){const i=e.hitTest(t.clientX,t.clientY),n=i.region,l=1.5*o.HeaderRenderer.iconWidth,d=o.HeaderRenderer.buttonPadding,h=a.Platform.accelKey(t);if(this._mouseIsDown=!0,"void"!==i.region&&this._cellClicked.emit(i),"corner-header"===n||"column-header"===n){const r=e.columnSize("corner-header"===n?"row-header":"body",i.column),a=e.rowSize("column-header",i.row),o="column-header"===i.region&&i.row==this._grid.grid.dataModel.rowCount("column-header")-1||"corner-header"===i.region&&0===i.row;if(i.x>r-l-d&&i.x<r-d&&i.y>a-l-d&&i.y<a-d&&o)return void this._grid.contextMenu.open(e,Object.assign(Object.assign({},i),{x:t.clientX+window.scrollX,y:t.clientY+window.scrollY}))}if(e){const t=s.createCellConfigObject(e,i);if(!t)return;const a=e.cellRenderers.get(t);if(a instanceof r.HyperlinkRenderer){let i=r.CellRenderer.resolveOption(a.url,t);if(i||(i=r.TextRenderer.formatGeneric()(t)),h){window.postMessage({id:"ipydatagrid::hyperlinkclick",url:i},"*");const t=this.cursorForHandle("none");e.viewport.node.style.cursor=t}}}super.onMouseDown(e,t)}onMouseUp(e,t){this._mouseIsDown=!1,super.onMouseUp(e,t)}get mouseIsDown(){return this._mouseIsDown}get isResizing(){return null!==this.pressData&&("column-resize"==this.pressData.type||"row-resize"==this.pressData.type)}get cellClicked(){return this._cellClicked}static createCellConfigObject(e,t){const{region:i,row:r,column:a}=t;if("void"===i)return;const n=e.dataModel.data(i,r,a),o=e.dataModel.metadata(i,r,a);return Object.assign(Object.assign({},t),{value:n,metadata:o})}}t.MouseHandler=s},7466:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StreamingFeatherGrid=void 0;const r=i(4583),a=i(4470);class n extends a.FeatherGrid{constructor(e){super(e),this._requestData=e.requestData,this._pullData=new r.Debouncer(this.pullDataImpl.bind(this),e.debounceDelay)}messageHook(e,t){return e===this.grid.viewport&&("scroll-request"!==t.type&&"resize"!==t.type&&"row-resize-request"!==t.type&&"column-resize-request"!==t.type||this.tick()),!0}tick(){this._pullData.invoke()}pullDataImpl(){let e=this.grid.viewport.node.offsetWidth,t=this.grid.viewport.node.offsetHeight;if(e=Math.round(e),t=Math.round(t),e<=0||t<=0)return;const i=this.grid._columnSections.length-this.grid.scrollX,r=this.grid._rowSections.length-this.grid.scrollY,a=this.grid.headerWidth,n=this.grid.headerHeight,o=a,s=n,l=Math.min(e-1,a+i-1),d=Math.min(t-1,n+r-1),h=this.grid._rowSections.indexOf(s-n+this.grid.scrollY),c=this.grid._columnSections.indexOf(o-a+this.grid.scrollX),u=this.grid._rowSections.indexOf(d-n+this.grid.scrollY),m=this.grid._columnSections.indexOf(l-a+this.grid.scrollX);this._requestData(h,u,c,m)}}t.StreamingFeatherGrid=n},5976:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=t.Scalar=t.ArrayUtils=void 0;const r=i(420);!function(e){function t(e,t,i){if(0===i)return[0,t];for(let r=0;r<e[i-1].length;r++){const a=e[i-1][r],n=a.length,o=a[0][0],s=a[n-1][0];if(t>=o&&t<=s)return[o,s]}return[]}e.generateMultiIndexArrayLocations=function(e){const t=e._dataset.schema.primaryKey.slice(0,e._dataset.schema.primaryKey.length-1),i=e._dataset.schema.fields,r=[];for(let e=0;e<i.length-1;e++)t.includes(i[e].name)||r.push(e);return r},e.generateColMergedCellLocations=function(e,t){if(0===t.length)return[];const i=e._dataset.schema.fields,r=e._dataset.schema.primaryKey.length-1,a=[];let n=[];const o=t[0];let s;for(let e=0;e<i[o].rows.length;e++){let o=[];for(const a of t){const t=i[a].rows[e];0==o.length||s==t?o.push([e,a-r]):(n.push(o),o=[[e,a-r]]),s=t}n.push(o),a.push(n),n=[]}return a},e.generateRowMergedCellLocations=function(e){const i=e._dataset,r=i.schema.primaryKey.slice(0,i.schema.primaryKey.length-1);if(!(r.length>1))return[];const a=i.data,n=[];let o=[];for(let e=0;e<r.length;e++){let s,l=[];for(let d=0;d<i.length;d++){const i=a[r[e]][d],[h,c]=t(n,d,e);0==l.length||s==i&&l[0][0]>=h&&d<=c?l.push([d,e]):(o.push(l),l=[[d,e]]),s=i}o.push(l),n.push(o),o=[]}return n},e.validateMergingHierarchy=function(e){let t;for(const i of e)if(void 0!==t){if(i.length<t)return!1;t=i.length}else t=i.length;return!0},e.generateColumnCellGroups=function(e){const t=[];for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)if(e[i][r].length>1){const a=e[i][r].length,n=e[i][r][0][1],o=e[i][r][a-1][1];t.push({r1:i,c1:n,r2:i,c2:o})}return t},e.generateRowCellGroups=function(e){const t=[];for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)if(e[i][r].length>1){const a=e[i][r].length,n=e[i][r][0][0],o=e[i][r][a-1][0];t.push({r1:n,c1:i,r2:o,c2:i})}return t}}(t.ArrayUtils||(t.ArrayUtils={})),(t.Scalar||(t.Scalar={})).isScalar=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e},function(e){function t(e){const t=document.querySelector(".ipydatagrid-widget")||document.body;return window.getComputedStyle(t).getPropertyValue(e)||"#ffffff"}function i(e,i=1){return function(e,t){const i=r.rgb(e);return i.opacity=t,i.formatRgb()}(t(e),i)}e.getComputedColor=t,e.getCSSColor=i,e.getBackgroundColor=function(e=0,t=1){return i("--ipydatagrid-layout-color"+e,t)},e.getFontColor=function(e=0,t=1){return i("--ipydatagrid-ui-font-color"+e,t)},e.getBorderColor=function(e=0,t=1){return i("--ipydatagrid-border-color"+e,t)},e.getBrandColor=function(e=0,t=1){return i("--ipydatagrid-brand-color"+e,t)}}(t.Theme||(t.Theme={}))},8479:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VegaExprView=t.VegaExprModel=void 0;const r=i(6107),a=i(5846),n=i(6187),o=i(3909),s=i(1797),l=a.defaultLocale(),d={context:{dataflow:{locale:()=>l}}};for(const e in n.functionContext)n.functionContext[e]=n.functionContext[e].bind(d);class h extends o.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:h.model_name,_model_module:h.model_module,_model_module_version:h.model_module_version,value:"default_value"})}initialize(e,t){super.initialize(e,t);const i={whitelist:["cell","default_value","functions"],globalvar:"cell",functions:e=>{const t=r.functions(e);for(const e in n.functionContext)t[e]="functions."+e;return t}};this._codegen=r.codegen(i),this.updateFunction(),this.on("change:value",this.updateFunction.bind(this))}process(e,t){return this._function(e,t,n.functionContext)}_processRegex(e,t){const i=t.match(/\[(.*?)\]/g),r=i[0].match(/\[(.*?)\]/)[1];return 1===i.length?`cell.metadata.data(cell.row, ${r})`:`cell.metadata.data(cell.row, ${r})${i.splice(1).join("")}`}_augmentExpression(e){let t=e.code;return t=t.replace(/cell.metadata.data(?<data>(\[(.*?)\])+)/g,this._processRegex),e.code=t,e}updateFunction(){let e=this._codegen(r.parse(this.get("value")));e=this._augmentExpression(e),this._function=Function("cell","default_value","functions",'"use strict";return('+e.code+")")}}t.VegaExprModel=h,h.model_name="VegaExprModel",h.model_module=s.MODULE_NAME,h.model_module_version=s.MODULE_VERSION,h.view_name="VegaExprView",h.view_module=s.MODULE_NAME,h.view_module_version=s.MODULE_VERSION;class c extends o.WidgetView{process(e,t){return this.model.process(e,t)}}t.VegaExprView=c},1797:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const r=i(8330);t.MODULE_VERSION=r.version,t.MODULE_NAME=r.name},4561:(e,t,i)=>{i.d(t,{A:()=>C});var r=i(6551),a=i.n(r),n=i(1992),o=i.n(n),s=i(5379),l=i.n(s),d=new URL(i(8511),i.b),h=new URL(i(2343),i.b),c=new URL(i(5180),i.b),u=new URL(i(1716),i.b),m=new URL(i(5356),i.b),g=new URL(i(8785),i.b),p=o()(a()),_=l()(d),f=l()(h),y=l()(c),b=l()(u),w=l()(m),v=l()(g);p.push([e.id,`:root {\n  --ipydatagrid-ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,\n    Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --ipydatagrid-ui-font-size0: 0.83333em;\n  --ipydatagrid-ui-font-size1: 13px; /* Base font size */\n  --ipydatagrid-ui-font-size2: 1.2em;\n  --ipydatagrid-ui-font-size3: 1.44em;\n  --ipydatagrid-padding: 3px;\n  --ipydatagrid-filter-dialog-width: 220px;\n  --ipydatagrid-filter-icon-light: url(${_});\n  --ipydatagrid-sort-asc-icon-light: url(${f});\n  --ipydatagrid-sort-desc-icon-light: url(${y});\n  --ipydatagrid-filter-icon-dark: url(${b});\n  --ipydatagrid-sort-asc-icon-dark: url(${w});\n  --ipydatagrid-sort-desc-icon-dark: url(${v});\n  --ipydatagrid-filter-icon: var(--ipydatagrid-filter-icon-light);\n  --ipydatagrid-sort-asc-icon: var(--ipydatagrid-sort-asc-icon-light);\n  --ipydatagrid-sort-desc-icon: var(--ipydatagrid-sort-desc-icon-light);\n\n  --ipydatagrid-layout-color0: white;\n  --ipydatagrid-layout-color1: white;\n  --ipydatagrid-layout-color2: #eeeeee;\n  --ipydatagrid-layout-color3: #bdbdbd;\n  --ipydatagrid-layout-color4: #757575;\n\n  --ipydatagrid-ui-font-color0: rgba(0, 0, 0, 1);\n  --ipydatagrid-ui-font-color1: rgba(0, 0, 0, 0.87);\n  --ipydatagrid-ui-font-color2: rgba(0, 0, 0, 0.54);\n  --ipydatagrid-ui-font-color3: rgba(0, 0, 0, 0.38);\n\n  --ipydatagrid-border-color0: #bdbdbd;\n  --ipydatagrid-border-color1: #bdbdbd;\n  --ipydatagrid-border-color2: #e0e0e0;\n  --ipydatagrid-border-color3: #eeeeee;\n\n  --ipydatagrid-brand-color0: #1976d2;\n  --ipydatagrid-brand-color1: #2196f3;\n  --ipydatagrid-brand-color2: #64b5f6;\n  --ipydatagrid-brand-color3: #bbdefb;\n  --ipydatagrid-brand-color4: #e3f2fd;\n  --ipydatagrid-brand-color5: #00e6ff;\n  --ipydatagrid-brand-color6: #ffe100;\n  --ipydatagrid-brand-color7: #009eb0;\n  --ipydatagrid-brand-color8: #b09b00;\n\n  --ipydatagrid-menu-bgcolor: white;\n  --ipydatagrid-menu-border-color: #bdbdbd;\n  --ipydatagrid-filter-dlg-textcolor: black;\n  --ipydatagrid-filter-dlg-bgcolor: white;\n}\n\n.ipydatagrid-widget {\n  width: 100%;\n  height: 100%;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.ipydatagrid-widget > div {\n  width: 100%;\n  height: 100%;\n  padding: var(--ipydatagrid-padding);\n  border: none;\n  font-family: "Lato", Helvetica, sans-serif;\n}\n\n.lm-DataGrid-cellEditorOccluder {\n  margin: var(--ipydatagrid-padding);\n}\n\n.ipydatagrid-filterMenu {\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, .2);\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  z-index: 10;\n  padding: 5px;\n  min-height: 143px;\n}\n\n.ipydatagrid-filterMenu select, .ipydatagrid-filterMenu input, .ipydatagrid-filterMenu button {\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.ipydatagrid-filterMenuIcon {\n  background-size: 21px;\n  background-repeat: no-repeat;\n}\n\n.ipydatagrid-filterMenuIcon-filter {\n  background-image: var(--ipydatagrid-filter-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortAsc {\n  background-image: var(--ipydatagrid-sort-asc-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortDesc {\n  background-image: var(--ipydatagrid-sort-desc-icon);\n}\n\n.ipydatagrid-unique-value-grid {\n  min-height: 165px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n  z-index: 1;\n}\n\n.ipydatagrid-filter-title {\n  min-height: 25px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-filter-apply {\n  min-height: 20px;\n}\n\n.ipydatagrid-filter-condition-select {\n  min-height: 35px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-context-menu {\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  background-color: var(--ipydatagrid-menu-bgcolor, white) !important;\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  padding-top: 7px;\n  padding-bottom: 4px;\n  padding-left: 3px;\n}\n\n.ipydatagrid-context-menu .lm-Menu-item.lm-mod-active, .ipydatagrid-context-menu .p-Menu-item.p-mod-active {\n  background-color: var(--ipydatagrid-layout-color2);\n}\n\n.ipydatagrid-text-input-filter {\n  transform: translate(5px, 0px);\n}\n`,""]);const C=p},506:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(6551),a=i.n(r),n=i(1992),o=i.n(n)()(a());o.push([e.id,".datagrid-container {\n  width: 100%;\n  height: 500px;\n}\n",""]);const s=o},1734:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(8318),a=i.n(r),n=i(5879),o=i.n(n),s=i(237),l=i.n(s),d=i(4862),h=i.n(d),c=i(1050),u=i.n(c),m=i(8495),g=i.n(m),p=i(4561),_={};_.styleTagTransform=g(),_.setAttributes=h(),_.insert=l().bind(null,"head"),_.domAPI=o(),_.insertStyleElement=u(),a()(p.A,_);const f=p.A&&p.A.locals?p.A.locals:void 0},1859:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(8318),a=i.n(r),n=i(5879),o=i.n(n),s=i(237),l=i.n(s),d=i(4862),h=i.n(d),c=i(1050),u=i.n(c),m=i(8495),g=i.n(m),p=i(506),_={};_.styleTagTransform=g(),_.setAttributes=h(),_.insert=l().bind(null,"head"),_.domAPI=o(),_.insertStyleElement=u(),a()(p.A,_);const f=p.A&&p.A.locals?p.A.locals:void 0},8785:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-arrow-down-short' width='1em' height='1em' viewBox='0 0 20 20' fill='white' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M6.646 9.646a.5.5 0 01.708 0L10 12.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z' clip-rule='evenodd'/%3e %3cpath fill-rule='evenodd' d='M10 6.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V7a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3e %3c/svg%3e"},5180:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-arrow-down-short' width='1em' height='1em' viewBox='0 0 20 20' fill='black' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M6.646 9.646a.5.5 0 01.708 0L10 12.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z' clip-rule='evenodd'/%3e %3cpath fill-rule='evenodd' d='M10 6.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V7a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3e %3c/svg%3e"},5356:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-arrow-up-short' width='1em' height='1em' viewBox='0 0 20 20' fill='white' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M10 7.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V8a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3e %3cpath fill-rule='evenodd' d='M9.646 6.646a.5.5 0 01.708 0l3 3a.5.5 0 01-.708.708L10 7.707l-2.646 2.647a.5.5 0 01-.708-.708l3-3z' clip-rule='evenodd'/%3e %3c/svg%3e"},2343:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-arrow-up-short' width='1em' height='1em' viewBox='0 0 20 20' fill='black' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M10 7.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V8a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3e %3cpath fill-rule='evenodd' d='M9.646 6.646a.5.5 0 01.708 0l3 3a.5.5 0 01-.708.708L10 7.707l-2.646 2.647a.5.5 0 01-.708-.708l3-3z' clip-rule='evenodd'/%3e %3c/svg%3e"},1716:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-filter' width='1em' height='1em' viewBox='0 0 20 20' fill='white' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M7.5 13a.5.5 0 01.5-.5h4a.5.5 0 010 1H8a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h8a.5.5 0 010 1H6a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h12a.5.5 0 010 1H4a.5.5 0 01-.5-.5z' clip-rule='evenodd'/%3e %3c/svg%3e"},8511:e=>{e.exports="data:image/svg+xml,%3csvg class='bi bi-filter' width='1em' height='1em' viewBox='0 0 20 20' fill='black' xmlns='http://www.w3.org/2000/svg'%3e %3cpath fill-rule='evenodd' d='M7.5 13a.5.5 0 01.5-.5h4a.5.5 0 010 1H8a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h8a.5.5 0 010 1H6a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h12a.5.5 0 010 1H4a.5.5 0 01-.5-.5z' clip-rule='evenodd'/%3e %3c/svg%3e"},8330:e=>{e.exports=JSON.parse('{"name":"ipydatagrid","version":"1.4.0","description":"Fast Datagrid widget for the Jupyter Notebook and JupyterLab","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","lib/**/*.js.map","lib/**/*.ts","dist/*.js","dist/*.js.map","dist/*.png","style/**/*.*"],"homepage":"https://github.com/jupyter-widgets/ipydatagrid","bugs":{"url":"https://github.com/jupyter-widgets/ipydatagrid/issues"},"license":"BSD-3-Clause","author":{"name":"NumFOCUS","email":""},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/jupyter-widgets/ipydatagrid"},"scripts":{"build":"jlpm run build:lib && jlpm run build:nbextension && jlpm run build:labextension","build:dev":"jlpm run build:lib && jlpm run build:nbextension && jlpm run build:labextension:dev","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production --no-devtool","build:widget-examples":"cd widget-examples/basic && webpack --mode=production","build:all":"jlpm run build:labextension && jlpm run build:nbextension && jlpm run build:widget-examples","clean":"rimraf dist && jlpm run clean:lib && jlpm run clean:labextension && jlpm run clean:nbextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipydatagrid/labextension","clean:nbextension":"rimraf ipydatagrid/nbextension/index.*","lint":"eslint \'js/**/*.{js,ts}\' --quiet --fix","prepack":"jlpm run build:labextension && jlpm run build:nbextension","test":"jest --verbose","watch":"npm-run-all -p watch:lib watch:labextension watch:nbextension","watch:lib":"tsc -w","watch:nbextension":"webpack --watch","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^2 || ^3 || ^4 || ^6","@jupyterlab/apputils":"^3 || ^4","@lumino/algorithm":"^1 || ^2","@lumino/application":"^1 || ^2","@lumino/commands":"^1 || ^2","@lumino/coreutils":"^1 || ^2","@lumino/datagrid":"^1 || ^2","@lumino/default-theme":"^1 || ^2","@lumino/domutils":"^1 || ^2","@lumino/messaging":"^1 || ^2","@lumino/polling":"^1 || ^2","@lumino/signaling":"^1 || ^2","@lumino/virtualdom":"^1 || ^2","@lumino/widgets":"^1 || ^2","bqplot":"^0.5","core-js-pure":"^3.30.2","d3-array":"^2.2.0","d3-color":"^3.1.0","d3-format":"^1.3.2","d3-scale":"^3.0.0","d3-time-format":"^2.1.3","jest-environment-jsdom":"^28.1.3","moment":"^2.24.0","underscore":"^1.13.6","vega-expression":"^2.6.0","vega-format":"^1.1.1","vega-functions":"^5.3.0"},"devDependencies":{"@babel/cli":"^7.6.3","@babel/core":"^7.6.3","@babel/preset-env":"^7.6.3","@babel/preset-typescript":"^7.6.0","@jupyterlab/builder":"^4.0.5","@types/jest":"^27.4.1","@types/node":"^10.11.6","@types/underscore":"^1.11.4","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.5.0","@typescript-eslint/parser":"^3.5.0","acorn":"^6.2.0","babel-jest":"^28.1.3","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","css-loader":"^6.8.1","eslint":"^7.3.1","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","jest":"^28.1.3","jest-raw-loader":"^1.0.1","lint-staged":"^10.2.11","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","raw-loader":"^4.0.2","rimraf":"^2.6.2","source-map-loader":"^0.2.4","style-loader":"^3.3.3","svg-url-loader":"~3.0.3","ts-jest":"^28.0.8","ts-loader":"^6.0.4","typescript":"~4.2.4","url-loader":"^4.1.0","webpack":"^5.88.2","webpack-cli":"^4.4.0"},"jupyterlab":{"extension":"lib/plugin","webpackConfig":"webpack.lab.config.js","outputDir":"./ipydatagrid/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true},"bqplot":{"bundled":false,"singleton":true},"@lumino/algorithm":{"bundled":false,"singleton":true},"@lumino/commands":{"bundled":false,"singleton":true},"@lumino/coreutils":{"bundled":false,"singleton":true},"@lumino/polling":{"bundled":false,"singleton":true},"@lumino/datagrid":{"bundled":false,"singleton":true},"@lumino/default-theme":{"bundled":false,"singleton":true},"@lumino/domutils":{"bundled":false,"singleton":true},"@lumino/messaging":{"bundled":false,"singleton":true},"@lumino/virtualdom":{"bundled":false,"singleton":true},"@lumino/widgets":{"bundled":false,"singleton":true}}},"packageManager":"yarn@3.7.0"}')}}]);